import{w as le,v as ne,a as re,c as ae}from"./vue_runtime-dom-Bqn1r05j.js";import{i as se,C as ie}from"./flowbite-BK3zwtRc.js";import{R as ue,c as de,a as ce}from"./vue-router-BeosvJ7G.js";import{d as _,o as G,e as A,f as d,j as c,k as i,l as f,m as $,r as Y,q as S,s as b,t as D,h as me,b as O,w as fe,u as pe,v as X,x as J,y as Z,F as ge,z as he,A as ve,B as ye}from"./vue_runtime-core-CbwMzOXN.js";import{x as I,y as m,g as be}from"./vue_reactivity-C1Gw_TzD.js";import{K as q,p as L,L as we,q as xe}from"./vue_shared-CljFMYtq.js";import{u as ke}from"./vueuse_core-Cd5FfhXZ.js";import{j as $e}from"./jsqr-D6czZR4y.js";import{Q as _e}from"./qrcode-9ot_T-Z6.js";import"./popperjs_core-DC5wud4b.js";import"./flowbite-datepicker-BdtIV8Rz.js";import"./vueuse_shared-xNM46b15.js";import"./dijkstrajs-B-FHFk8B.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const u of e)if(u.type==="childList")for(const w of u.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&a(w)}).observe(document,{childList:!0,subtree:!0});function l(e){const u={};return e.integrity&&(u.integrity=e.integrity),e.referrerPolicy&&(u.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?u.credentials="include":e.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(e){if(e.ep)return;e.ep=!0;const u=l(e);fetch(e.href,u)}})();const Ce=_({__name:"App",setup(t){return G(()=>{se()}),(o,l)=>(d(),A(I(ue)))}}),H=(t,o)=>{const l=t.__vccOpts||t;for(const[a,e]of o)l[a]=e;return l},Le={},Re={class:"center h-dvh w-dvw font-mono"},Ve={class:"bg--0 flex flex-col items-center rounded-3xl p-10"};function Ee(t,o){const l=Y("router-link");return d(),c("div",Re,[i("div",Ve,[o[1]||(o[1]=i("h1",{class:"text-9xl"},"Xin chào",-1)),f(l,{class:"link w-fit font-sans",to:"/qr-contact"},{default:$(()=>[...o[0]||(o[0]=[S("Tạo mã QR lưu danh bạ",-1)])]),_:1})])])}const Ne=H(Le,[["render",Ee]]),qe={},Se={class:"center h-dvh w-dvw font-mono"},Pe={class:"bg--0 flex flex-row items-center rounded-3xl p-10"},Te={class:"flex flex-col"};function Be(t,o){const l=Y("router-link");return d(),c("div",Se,[i("div",Pe,[o[2]||(o[2]=i("h1",{class:"text-9xl"},"404!",-1)),i("div",Te,[o[1]||(o[1]=i("a",null,"Trang này chưa tồn tại hoặc có thể đã bị xóa.",-1)),f(l,{class:"link w-fit font-sans",to:"/"},{default:$(()=>[...o[0]||(o[0]=[S("Về trang chủ",-1)])]),_:1})])])])}const Me=H(qe,[["render",Be]]),De=_({props:{name:{type:String,required:!0}}}),je={class:"material-symbols-outlined aspect-square"};function Fe(t,o,l,a,e,u){return d(),c("span",je,q(t.name),1)}const ee=H(De,[["render",Fe]]),Ue={class:"p-1"},Ae=["type","disabled"],Ie={key:1,class:"inset-y-0 start-0 flex items-center justify-center-safe"},U=_({__name:"Button",props:{type:{type:String,default:"button"},theme:{type:String,default:"primary"},buttonRef:{type:Function,required:!1},to:{type:String,required:!1}},setup(t,{expose:o}){const l=m(!1);return o({toggleLoading:()=>l.value=!l.value}),(a,e)=>(d(),c("div",Ue,[t.type!=="link"?(d(),c("button",{key:0,title:"",ref:t.buttonRef,type:t.type,class:L(["w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium",{"text--primary bg--primary hover:text--secondary hover:bg--secondary disabled:bg--secondary disabled:text--secondary":t.theme=="primary","text--tertiary hover:bg--tertiary hover:-text--2":t.theme=="secondary"}]),disabled:l.value},[l.value?b("",!0):D(a.$slots,"default",{key:0}),l.value?(d(),c("div",Ie,[f(ee,{name:"progress_activity",class:"animate-spin"})])):b("",!0)],10,Ae)):b("",!0),t.type==="link"?(d(),c("a",{key:1,class:"link",href:"#",onClick:e[0]||(e[0]=u=>t.to?a.$router.push({name:t.to}):"")},[D(a.$slots,"default")])):b("",!0)]))}});function Q(t){return o=>{t.value=o}}function Oe(){return new Promise(t=>{document.readyState==="complete"?t():window.addEventListener("load",()=>t(),{once:!0})})}function K(t){return new Promise(o=>setTimeout(o,t))}function z(t){const o=[];for(const l of t)if(l.key==="_content"&&l.children&&Array.isArray(l.children))o.push(...z(l.children));else{const a={...l};l.children&&Array.isArray(l.children)&&(a.children=z(l.children)),o.push(a)}return o}const ze=_({inheritAttrs:!1,setup({},{slots:t,attrs:o}){return()=>z(t.default?.()).map(l=>me("div",{class:["bg--0","h-fit","flex",o.class]},[l]))}}),He=_({__name:"LoadingDiv",setup(t,{expose:o}){const l=m(!1);function a(){l.value=!l.value}return o({toggleHidden:a}),(e,u)=>(d(),c("div",{class:L(["h-full w-full bg-white dark:bg-black",{hidden:l.value}])},[...u[0]||(u[0]=[i("div",{class:"h-full w-full animate-pulse bg-black/10 dark:bg-white/10"},null,-1)])],2))}}),We={key:0,class:"[&>*]:z-[45]"},Qe={key:1,class:"[&>*]:absolute [&>*]:z-[45]"},Ke=_({__name:"Carousel",props:{isCycle:{type:Boolean,default:!1},overflowing:{type:Boolean,default:!1},duration:{type:Number,default:500},cycleDuration:{type:Number,default:3e3},indicator:{type:Object,default:{activeClasses:"bg-white dark:bg-white/80",inactiveClasses:"bg-white/50 dark:bg-white/40 hover:bg-white/90 dark:hover:bg-white/70"}},indicatorsLocation:{type:[String,Object,Array],default:"bottom-5 left-1/2 -translate-x-1/2"}},setup(t,{expose:o}){const l=m(),a=m(),e=m(),u=m(),w=m(),x=m(),R=Q(u),v=Q(w),C=m(),P=m(0),j=m(),N=O(()=>P.value==1),T=O(()=>P.value==a.value?.childElementCount),k=t;class p extends ie{async _rotate(n){Object.values(n).forEach(g=>{g.el.classList.remove("hidden")}),await K(1),super._rotate(n),P.value=n.middle.position+1,j.value=n.middle.el,await K(k.duration),n.left.el.classList.add("hidden"),n.right.el.classList.add("hidden")}}return G(async()=>{const r=Array.from(a.value.children).map((s,h)=>({position:h,el:s})),n=r.map(()=>{const s=document.createElement("button");return s.className="h-3 w-3 rounded-full",s.type="button",s.title="",e.value?.append(s),s}),g={defaultPosition:0,interval:k.cycleDuration,indicators:{...k.indicator,items:Array.from(n).map((s,h)=>({position:h,el:s}))}};fe(ke(j).height,s=>{l.value.style.height=a.value.style.height=s.toString()+"px"}),await Oe(),x.value=new p(l.value,r,g,{}),k.isCycle&&x.value.cycle(),w.value?.addEventListener("click",()=>{(!N.value||k.overflowing||k.isCycle)&&x.value?.prev()}),u.value?.addEventListener("click",()=>{(!T.value||k.overflowing||k.isCycle)&&x.value?.next()}),C.value?.toggleHidden()}),o({next:()=>x.value?.next(),previous:()=>x.value?.prev()}),(r,n)=>(d(),c("div",{ref_key:"carouselElement",ref:l,class:"relative w-full",style:xe({"--duration":t.duration+"ms"})},[f(He,{ref_key:"loadingDiv",ref:C,class:"absolute z-40"},null,512),i("div",{ref_key:"carouselWrapper",ref:a,class:"relative h-56 overflow-hidden [&>*]:absolute! [&>*]:w-full [&>*]:duration-(--duration) [&>*]:ease-in-out"},[f(ze,we(pe(r.$attrs)),{default:$(()=>[D(r.$slots,"content")]),_:3},16)],512),i("div",{class:L([[t.indicatorsLocation],"absolute z-50 flex space-x-3"]),ref_key:"carouselIndicatorsWrapper",ref:e},null,2),r.$slots.buttons?b("",!0):(d(),c("div",We,[i("button",{title:"previous",ref_key:"carouselPrevious",ref:w,type:"button",class:L(["group absolute top-0 left-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&N.value}])},[...n[0]||(n[0]=[i("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[i("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[i("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 1 1 5l4 4"})])],-1)])],2),i("button",{title:"next",ref_key:"carouselNext",ref:u,type:"button",class:L(["group absolute top-0 right-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&T.value}])},[...n[1]||(n[1]=[i("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[i("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[i("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})])],-1)])],2)])),r.$slots.buttons?(d(),c("div",Qe,[D(r.$slots,"buttons",{next:I(R),previous:I(v),isEnd:T.value,isStart:N.value})])):b("",!0)],4))}}),Ge={class:"center h-dvh"},Ye={class:"bg--0 tablet:w-lg desktop:w-4xl desktop:min-h-auto tablet:min-h-auto flex h-fit min-h-dvh w-dvw items-center rounded-lg p-8"},Xe={key:0,class:"text-3xl font-medium"},Je={class:"desktop:w-md w-full space-y-6"},Ze=_({__name:"FormContainer",props:{title:{},buttonHandler:{type:Function}},setup(t){return(o,l)=>(d(),c("div",Ge,[i("div",Ye,[i("form",{class:"desktop:flex-row desktop:justify-between flex size-full flex-col justify-center-safe space-y-6",onSubmit:l[0]||(l[0]=le((...a)=>o.buttonHandler&&o.buttonHandler(...a),["prevent"]))},[o.title?(d(),c("h5",Xe,q(o.title),1)):b("",!0),i("div",Je,[D(o.$slots,"default")])],32)])]))}}),et={class:"text--primary bg--0 flex w-full flex-col p-1"},tt={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},ot=["value"],lt=_({__name:"SelectInput",props:X({name:{},list:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const o=J(t,"modelValue");return(l,a)=>(d(),c("div",et,[i("label",tt,q(l.name),1),Z(i("select",{class:"border--primary bg--0 text--0 w-full rounded-lg border p-2.5","onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e)},[(d(!0),c(ge,null,he(l.list,e=>(d(),c("option",{key:e[0],value:e[1]},q(e[0]),9,ot))),128))],512),[[ne,o.value]])]))}}),nt={class:"text--primary bg--0 flex w-full flex-col p-1"},rt={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},at={class:"relative z-0"},st={key:0,class:"pointer-events-none absolute inset-y-0 start-0 flex items-center px-[9px]"},it={class:"flex justify-center"},ut=["type","disabled","placeholder","multiple","id"],dt={key:0,class:"border--primary text--0 h-10 w-full rounded-l-lg border border-r-0 p-2 overflow-hidden"},E=_({__name:"TextInput",props:X({name:{type:String,required:!0},type:{type:String,default:"text"},icon:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1},accept:{type:String,default:""},multiple:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const o=J(t,"modelValue"),l=ve(),a=m("Chưa có tập tin"),e=t,u=O(()=>({accept:e.accept||void 0})),w=R=>{const v=R.target.files;v&&v.length>0?a.value=e.multiple?v.length+" tập tin":v[0].name:a.value="No file selected"},x=()=>{document.getElementById(l)?.click()};return(R,v)=>(d(),c("div",nt,[i("label",rt,q(t.name),1),i("div",at,[t.icon?(d(),c("div",st,[f(ee,{name:t.icon.toLowerCase()},null,8,["name"])])):b("",!0),i("div",it,[Z(i("input",ye({title:"","onUpdate:modelValue":v[0]||(v[0]=C=>o.value=C),class:["border--primary bg--0 text--0 h-10 w-full rounded-lg border p-2",{"ps-10!":t.icon,hidden:t.type=="file"}],type:t.type,disabled:t.disabled,placeholder:t.placeholder,multiple:t.multiple},u.value,{id:I(l),onchange:w}),null,16,ut),[[re,o.value]]),t.type=="file"?(d(),c("span",dt,q(a.value),1)):b("",!0),t.type=="file"?(d(),c("button",{key:1,type:"button",class:"border--primary bg--primary hover:bg--secondary flex h-auto items-center rounded-r-lg border px-4",onclick:x}," Duyệt ")):b("",!0)])])]))}}),ct={class:"right-0 -bottom-15 flex h-8 w-fit items-center justify-center [&>*]:ml-2"},mt={class:"w-full space-y-6"},ft={key:2},pt={class:"text-error"},gt={class:"aspect-square w-full"},ht=_({__name:"QrGenerator",setup(t){const o=m(),l=m(new Map),a=4096,e=be({name:"Phòng Công tác học sinh - sinh viên",email:"phongctct-hssv@tdtu.edu.vn",phone:"02837755054",address:"A0003",url:"fb.com/pcthssv.tdtu",logoRatio:1,errorLevel:"L",logoRotate:0}),u=m(),w=m(),x=m(),R=m(),v=m(),C=m(""),P=async()=>{o.value.toBlob(p=>{if(!p)return;const r=URL.createObjectURL(p),n=document.createElement("a");n.href=r,n.download=e.name+".png",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)},"image/png")},j=async()=>{v.value?.toggleLoading();const p=y=>(e.logoRatio=y,N(!0)),r=10,{width:n,height:g}=w.value;let s=0,h=Math.ceil(a/Math.max(n,g))*r;for(;s<=h;){const y=Math.floor((s+h)/2);await p(y/r)?s=y+1:h=y-1}x.value?.next(),v.value?.toggleLoading()},N=async(p=!1)=>{C.value="",typeof p!="boolean"&&(p=!1),p||R.value?.toggleLoading();function r(){const{name:s,phone:h,email:y,address:V,url:F}=e,B=s,M="",W="",te=[B,M,W,"",""].join(";"),oe=`${B} ${W} ${M}`.trim();return{qrContact:`
BEGIN:VCARD
VERSION:3.0
N:${te}
FN:${oe}
TEL;TYPE=cell:${h}
EMAIL;INTERNET;PREF:${y}
ADR;TYPE=WORK;PREF=1;LABEL="":;Trường Đại học Tôn Đức Thắng;Phòng ${V};phường Tân Phong;19 Nguyễn Hữu Thọ;Thành phố Hồ Chí Minh;Việt Nam
URL:${F}
END:VCARD
  `.trim(),qrPhone:`MECARD:TEL:${h};;`}}const{qrContact:n}=r(),g={margin:5,width:a,errorCorrectionLevel:e.errorLevel};_e.toCanvas(o.value,n,g),await u.value?.();try{const s=o.value.getContext("2d",{willReadFrequently:!0}),{data:h}=$e(s.getImageData(0,0,a,a).data,a,a);if(h!==n)throw new Error;if(p)return!0;x.value?.next()}catch{if(p)return!1;C.value="Logo quá lớn, không thể nhận dạng."}return R.value?.toggleLoading(),!1};async function T(p){const r=p.target;if(r.files&&r.files[0]){const n=r.files[0];w.value=await k(n),u.value=async()=>new Promise(g=>{const s=new FileReader;s.onload=h=>{const y=new Image;y.onload=()=>{if(o.value){const V=o.value.getContext("2d",{willReadFrequently:!0}),F=o.value,B=y.width*e.logoRatio,M=y.height*e.logoRatio;V&&(V.save(),V.translate(F.width/2,F.height/2),V.rotate(e.logoRotate/180*Math.PI),V.drawImage(y,-B/2,-M/2,B,M),V.restore())}g(null)},y.src=h.target?.result},s.readAsDataURL(n)})}else u.value=void 0}function k(p){return new Promise((r,n)=>{const g=new FileReader;g.onload=()=>{const s=new Image;s.onload=()=>{r({width:s.width,height:s.height})},s.onerror=()=>{n(new Error("Unable to load image."))},s.src=g.result},g.onerror=()=>{n(new Error("Error reading file."))},g.readAsDataURL(p)})}return l.value.set("Cao","H"),l.value.set("Trung bình","M"),l.value.set("Thấp","L"),(p,r)=>(d(),A(Ze,{"button-handler":N,title:"Tạo QR lưu danh bạ"},{default:$(()=>[f(Ke,{"indicators-location":"-bottom-15 p-1 hidden",indicator:{activeClasses:"bg-light-primary/90",inactiveClasses:"bg-light-primary/50 hover:bg-light-primary/70"},class:"mb-20 min-h-30",ref_key:"carousel",ref:x},{buttons:$(({isEnd:n,previous:g,isStart:s})=>[i("div",ct,[f(U,{theme:"secondary",class:L({hidden:u.value==null||n}),onclick:j,ref_key:"autoAlignLogoButton",ref:v},{default:$(()=>[...r[8]||(r[8]=[S(" Tự động căn chỉnh logo ",-1)])]),_:1},8,["class"]),f(U,{"button-ref":g,theme:"secondary",class:L({hidden:s})},{default:$(()=>[...r[9]||(r[9]=[S(" Trở về ",-1)])]),_:1},8,["button-ref","class"]),f(U,{ref_key:"submitButton",ref:R,class:L({hidden:n}),onclick:N},{default:$(()=>[...r[10]||(r[10]=[S(" Hoàn tất ",-1)])]),_:1},8,["class"]),f(U,{class:L({hidden:s}),onclick:P},{default:$(()=>[...r[11]||(r[11]=[S(" Tải ảnh ",-1)])]),_:1},8,["class"])])]),content:$(()=>[i("div",mt,[f(E,{name:"Họ và tên",modelValue:e.name,"onUpdate:modelValue":r[0]||(r[0]=n=>e.name=n)},null,8,["modelValue"]),f(E,{name:"Số điện thoại",modelValue:e.phone,"onUpdate:modelValue":r[1]||(r[1]=n=>e.phone=n)},null,8,["modelValue"]),f(E,{name:"Địa chỉ thư điện tử",modelValue:e.email,"onUpdate:modelValue":r[2]||(r[2]=n=>e.email=n)},null,8,["modelValue"]),f(E,{name:"Số phòng",modelValue:e.address,"onUpdate:modelValue":r[3]||(r[3]=n=>e.address=n)},null,8,["modelValue"]),f(E,{name:"Link url fanpage",modelValue:e.url,"onUpdate:modelValue":r[4]||(r[4]=n=>e.url=n)},null,8,["modelValue"]),f(lt,{name:"Cấp độ (càng cao, mã QR càng chi tiết)",list:l.value,modelValue:e.errorLevel,"onUpdate:modelValue":r[5]||(r[5]=n=>e.errorLevel=n)},null,8,["list","modelValue"]),f(E,{type:"file",onChange:T,accept:"image/*",name:"Ảnh logo"}),u.value?(d(),A(E,{key:0,name:"Tỉ lệ logo so với gốc",modelValue:e.logoRatio,"onUpdate:modelValue":r[6]||(r[6]=n=>e.logoRatio=n)},null,8,["modelValue"])):b("",!0),u.value?(d(),A(E,{key:1,name:"Độ lớn góc xoay mã QR",modelValue:e.logoRotate,"onUpdate:modelValue":r[7]||(r[7]=n=>e.logoRotate=n),"default-value":"0"},null,8,["modelValue"])):b("",!0),C.value?(d(),c("div",ft,[i("a",pt,q(C.value),1)])):b("",!0)]),i("div",gt,[i("canvas",{ref_key:"qrCode",ref:o,class:"!size-full"},null,512)])]),_:1},512)]),_:1}))}}),vt=de({history:ce("/qrcodegen/"),routes:[{path:"/",component:Ne},{path:"/qr-contact",component:ht},{path:"/:pathMatch(.*)*",component:Me}]});ae(Ce).use(vt).mount("#app");
