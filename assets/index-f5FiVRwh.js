import{w as J,v as Z,a as ee,c as te}from"./vue_runtime-dom-mKP-e7i2.js";import{i as oe,C as ne}from"./flowbite-BK3zwtRc.js";import{R as re,c as le,a as se}from"./vue-router-DpWpTnzb.js";import{d as k,o as H,e as j,f as u,j as d,k as a,l as c,m as _,r as I,q,s as x,t as T,h as ae,b as B,w as ie,u as ue,v as W,x as Q,y as K,F as de,z as ce,A as me}from"./vue_runtime-core-DvRMB0Zm.js";import{x as D,y as m,g as fe}from"./vue_reactivity-C1Gw_TzD.js";import{K as R,p as $,L as pe,q as ge}from"./vue_shared-CljFMYtq.js";import{u as he}from"./vueuse_core-BMnmDBtd.js";import{e as ve}from"./qr-scanner-B7z2R3KM.js";import{Q as ye}from"./qrcode-9ot_T-Z6.js";import"./popperjs_core-DC5wud4b.js";import"./flowbite-datepicker-BdtIV8Rz.js";import"./vueuse_shared-DT5-QB1h.js";import"./dijkstrajs-B-FHFk8B.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const v of i.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&n(v)}).observe(document,{childList:!0,subtree:!0});function o(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=o(l);fetch(l.href,i)}})();const be=k({__name:"App",setup(t){return H(()=>{oe()}),(e,o)=>(u(),j(D(re)))}}),O=(t,e)=>{const o=t.__vccOpts||t;for(const[n,l]of e)o[n]=l;return o},we={},xe={class:"center h-dvh w-dvw font-mono"},ke={class:"bg--0 flex flex-col items-center rounded-3xl p-10"};function _e(t,e){const o=I("router-link");return u(),d("div",xe,[a("div",ke,[e[1]||(e[1]=a("h1",{class:"text-9xl"},"Xin chào",-1)),c(o,{class:"link w-fit font-sans",to:"/qr-contact"},{default:_(()=>[...e[0]||(e[0]=[q("Tạo mã QR lưu danh bạ",-1)])]),_:1})])])}const $e=O(we,[["render",_e]]),Ce={},Le={class:"center h-dvh w-dvw font-mono"},Ve={class:"bg--0 flex flex-row items-center rounded-3xl p-10"},Re={class:"flex flex-col"};function Ee(t,e){const o=I("router-link");return u(),d("div",Le,[a("div",Ve,[e[2]||(e[2]=a("h1",{class:"text-9xl"},"404!",-1)),a("div",Re,[e[1]||(e[1]=a("a",null,"Trang này chưa tồn tại hoặc có thể đã bị xóa.",-1)),c(o,{class:"link w-fit font-sans",to:"/"},{default:_(()=>[...e[0]||(e[0]=[q("Về trang chủ",-1)])]),_:1})])])])}const Ne=O(Ce,[["render",Ee]]);function z(t){return e=>{t.value=e}}function Se(){return new Promise(t=>{document.readyState==="complete"?t():window.addEventListener("load",()=>t(),{once:!0})})}function F(t){return new Promise(e=>setTimeout(e,t))}const qe=k({props:{name:{type:String,required:!0}}}),Te={class:"material-symbols-outlined aspect-square"};function Pe(t,e,o,n,l,i){return u(),d("span",Te,R(t.name),1)}const G=O(qe,[["render",Pe]]),Ae={class:"p-1"},je=["type","disabled"],Be={key:1,class:"inset-y-0 start-0 flex items-center justify-center-safe"},A=k({__name:"Button",props:{type:{type:String,default:"button"},theme:{type:String,default:"primary"},buttonRef:{type:Function,required:!1},to:{type:String,required:!1}},setup(t,{expose:e}){const o=m(!1);return e({toggleLoading:()=>o.value=!o.value}),(n,l)=>(u(),d("div",Ae,[t.type!=="link"?(u(),d("button",{key:0,title:"",ref:t.buttonRef,type:t.type,class:$(["w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium",{"text--primary bg--primary hover:text--secondary hover:bg--secondary disabled:bg--secondary disabled:text--secondary":t.theme=="primary","text--tertiary hover:bg--tertiary hover:-text--2":t.theme=="secondary"}]),disabled:o.value},[o.value?x("",!0):T(n.$slots,"default",{key:0}),o.value?(u(),d("div",Be,[c(G,{name:"progress_activity",class:"animate-spin"})])):x("",!0)],10,je)):x("",!0),t.type==="link"?(u(),d("a",{key:1,class:"link",href:"#",onClick:l[0]||(l[0]=i=>t.to?n.$router.push({name:t.to}):"")},[T(n.$slots,"default")])):x("",!0)]))}});function M(t){const e=[];for(const o of t)if(o.key==="_content"&&o.children&&Array.isArray(o.children))e.push(...M(o.children));else{const n={...o};o.children&&Array.isArray(o.children)&&(n.children=M(o.children)),e.push(n)}return e}const De=k({inheritAttrs:!1,setup({},{slots:t,attrs:e}){return()=>M(t.default?.()).map(o=>ae("div",{class:["bg--0","h-fit","flex",e.class]},[o]))}}),Fe=k({__name:"LoadingDiv",setup(t,{expose:e}){const o=m(!1);function n(){o.value=!o.value}return e({toggleHidden:n}),(l,i)=>(u(),d("div",{class:$(["h-full w-full bg-white dark:bg-black",{hidden:o.value}])},[...i[0]||(i[0]=[a("div",{class:"h-full w-full animate-pulse bg-black/10 dark:bg-white/10"},null,-1)])],2))}}),Me={key:0,class:"[&>*]:z-[45]"},Oe={key:1,class:"[&>*]:absolute [&>*]:z-[45]"},Ue=k({__name:"Carousel",props:{isCycle:{type:Boolean,default:!1},overflowing:{type:Boolean,default:!1},duration:{type:Number,default:500},cycleDuration:{type:Number,default:3e3},indicator:{type:Object,default:{activeClasses:"bg-white dark:bg-white/80",inactiveClasses:"bg-white/50 dark:bg-white/40 hover:bg-white/90 dark:hover:bg-white/70"}},indicatorsLocation:{type:[String,Object,Array],default:"bottom-5 left-1/2 -translate-x-1/2"}},setup(t,{expose:e}){const o=m(),n=m(),l=m(),i=m(),v=m(),b=m(),L=z(i),P=z(v),E=m(),N=m(0),y=m(),r=B(()=>N.value==1),s=B(()=>N.value==n.value?.childElementCount),f=t;class w extends ne{async _rotate(p){Object.values(p).forEach(S=>{S.el.classList.remove("hidden")}),await F(1),super._rotate(p),N.value=p.middle.position+1,y.value=p.middle.el,await F(f.duration),p.left.el.classList.add("hidden"),p.right.el.classList.add("hidden")}}return H(async()=>{const g=Array.from(n.value.children).map((h,V)=>({position:V,el:h})),p=g.map(()=>{const h=document.createElement("button");return h.className="h-3 w-3 rounded-full",h.type="button",h.title="",l.value?.append(h),h}),S={defaultPosition:0,interval:f.cycleDuration,indicators:{...f.indicator,items:Array.from(p).map((h,V)=>({position:V,el:h}))}};ie(he(y).height,h=>{o.value.style.height=n.value.style.height=h.toString()+"px"}),await Se(),b.value=new w(o.value,g,S,{}),f.isCycle&&b.value.cycle(),v.value?.addEventListener("click",()=>{(!r.value||f.overflowing||f.isCycle)&&b.value?.prev()}),i.value?.addEventListener("click",()=>{(!s.value||f.overflowing||f.isCycle)&&b.value?.next()}),E.value?.toggleHidden()}),e({next:()=>b.value?.next(),previous:()=>b.value?.prev()}),(g,p)=>(u(),d("div",{ref_key:"carouselElement",ref:o,class:"relative w-full",style:ge({"--duration":t.duration+"ms"})},[c(Fe,{ref_key:"loadingDiv",ref:E,class:"absolute z-40"},null,512),a("div",{ref_key:"carouselWrapper",ref:n,class:"relative h-56 overflow-hidden [&>*]:absolute! [&>*]:w-full [&>*]:duration-(--duration) [&>*]:ease-in-out"},[c(De,pe(ue(g.$attrs)),{default:_(()=>[T(g.$slots,"content")]),_:3},16)],512),a("div",{class:$([[t.indicatorsLocation],"absolute z-50 flex space-x-3"]),ref_key:"carouselIndicatorsWrapper",ref:l},null,2),g.$slots.buttons?x("",!0):(u(),d("div",Me,[a("button",{title:"previous",ref_key:"carouselPrevious",ref:v,type:"button",class:$(["group absolute top-0 left-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&r.value}])},[...p[0]||(p[0]=[a("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[a("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[a("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 1 1 5l4 4"})])],-1)])],2),a("button",{title:"next",ref_key:"carouselNext",ref:i,type:"button",class:$(["group absolute top-0 right-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&s.value}])},[...p[1]||(p[1]=[a("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[a("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[a("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})])],-1)])],2)])),g.$slots.buttons?(u(),d("div",Oe,[T(g.$slots,"buttons",{next:D(L),previous:D(P),isEnd:s.value,isStart:r.value})])):x("",!0)],4))}}),ze={class:"center h-dvh"},He={class:"bg--0 tablet:w-lg desktop:w-4xl desktop:min-h-auto tablet:min-h-auto flex h-fit min-h-dvh w-dvw items-center rounded-lg p-8"},Ie={key:0,class:"text-3xl font-medium"},We={class:"desktop:w-md w-full space-y-6"},Qe=k({__name:"FormContainer",props:{title:{},buttonHandler:{type:Function}},setup(t){return(e,o)=>(u(),d("div",ze,[a("div",He,[a("form",{class:"desktop:flex-row desktop:justify-between flex size-full flex-col justify-center-safe space-y-6",onSubmit:o[0]||(o[0]=J((...n)=>e.buttonHandler&&e.buttonHandler(...n),["prevent"]))},[e.title?(u(),d("h5",Ie,R(e.title),1)):x("",!0),a("div",We,[T(e.$slots,"default")])],32)])]))}}),Ke={class:"text--primary bg--0 flex w-full flex-col p-1"},Ge={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},Ye=["value"],Xe=k({__name:"SelectInput",props:W({name:{},list:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Q(t,"modelValue");return(o,n)=>(u(),d("div",Ke,[a("label",Ge,R(o.name),1),K(a("select",{class:"border--primary bg--0 text--0 w-full rounded-lg border p-2.5","onUpdate:modelValue":n[0]||(n[0]=l=>e.value=l)},[(u(!0),d(de,null,ce(o.list,l=>(u(),d("option",{key:l[0],value:l[1]},R(l[0].replace("_"," ")),9,Ye))),128))],512),[[Z,e.value]])]))}}),Je={class:"text--primary bg--0 flex w-full flex-col p-1"},Ze={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},et={class:"relative z-0"},tt={key:0,class:"pointer-events-none absolute inset-y-0 start-0 flex items-center px-[9px]"},ot=["type","disabled","placeholder"],C=k({__name:"TextInput",props:W({name:{type:String,required:!0},type:{type:String,default:"text"},icon:{type:String,required:!1},placeholder:{type:String,required:!1},disable:{type:Boolean,required:!1},accept:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Q(t,"modelValue"),o=t,n=B(()=>({accept:o.accept||void 0}));return(l,i)=>(u(),d("div",Je,[a("label",Ze,R(t.name),1),a("div",et,[t.icon?(u(),d("div",tt,[c(G,{name:t.icon.toLowerCase()},null,8,["name"])])):x("",!0),K(a("input",me({title:"","onUpdate:modelValue":i[0]||(i[0]=v=>e.value=v),class:["border--primary bg--0 text--0 w-full rounded-lg border p-2.5",{"ps-10!":t.icon}],type:t.type,disabled:t.disable,placeholder:t.placeholder},n.value),null,16,ot),[[ee,e.value]])])]))}}),nt={class:"right-0 -bottom-15 flex h-8 w-fit items-center justify-center [&>*]:ml-2"},rt={class:"w-full space-y-6"},lt={key:1},st={class:"text-error"},at={class:"aspect-square w-full"},it=k({__name:"QrGenerator",setup(t){const e=m(),o=m(new Map),n=fe({name:"",email:"",phone:"",address:"",url:"",logoRatio:1,errorLevel:"L"}),l=new FileReader,i=m(),v=m(),b=m(),L=m(""),P=async()=>{e.value.toBlob(y=>{if(!y)return;const r=URL.createObjectURL(y),s=document.createElement("a");s.href=r,s.download=n.name+".png",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},"image/png")},E=async()=>{L.value="",b.value?.toggleLoading();function y(){const{name:f,phone:w,email:g,address:p,url:S}=n,h=f,V="",U="",Y=[h,V,U,"",""].join(";"),X=`${h} ${U} ${V}`.trim();return{qrContact:`
BEGIN:VCARD
VERSION:3.0
N:${Y}
FN:${X}
TEL;TYPE=cell:${w}
EMAIL;INTERNET;PREF:${g}
ADR;TYPE=WORK;PREF=1;LABEL="":;Trường Đại học Tôn Đức Thắng;Phòng ${p};phường Tân Phong;19 Nguyễn Hữu Thọ;Thành phố Hồ Chí Minh;Việt Nam
URL:${S}
END:VCARD
  `.trim(),qrPhone:`MECARD:TEL:${w};;`}}const{qrContact:r}=y(),s={margin:5,width:4096,errorCorrectionLevel:n.errorLevel};ye.toCanvas(e.value,r,s),i.value?.(),await F(10);try{if(await ve.scanImage(e.value)!==r)throw new Error;v.value?.next()}catch{L.value="Logo quá lớn, không thể nhận dạng."}b.value?.toggleLoading()};l.onload=y=>{const r=new Image;r.onload=()=>{if(e.value){const s=e.value.getContext("2d"),f=e.value,w=r.width*n.logoRatio,g=r.height*n.logoRatio;s&&s.drawImage(r,(f.width-w)/2,(f.height-g)/2,w,g)}},r.src=y.target?.result};function N(y){const r=y.target;if(r.files&&r.files[0]){const s=r.files[0];i.value=()=>l.readAsDataURL(s)}}return o.value.set("Cao","high"),o.value.set("Trung bình","medium"),o.value.set("Thấp","low"),(y,r)=>(u(),j(Qe,{"button-handler":E,title:"Tạo QR lưu danh bạ"},{default:_(()=>[c(Ue,{"indicators-location":"-bottom-15 p-1 hidden",indicator:{activeClasses:"bg-light-primary/90",inactiveClasses:"bg-light-primary/50 hover:bg-light-primary/70"},class:"mb-20 min-h-30",ref_key:"carousel",ref:v},{buttons:_(({isEnd:s,previous:f,isStart:w})=>[a("div",nt,[c(A,{"button-ref":f,theme:"secondary",class:$({hidden:w})},{default:_(()=>[...r[7]||(r[7]=[q(" Trở về ",-1)])]),_:1},8,["button-ref","class"]),c(A,{ref_key:"submitButton",ref:b,class:$({hidden:s}),onclick:E},{default:_(()=>[...r[8]||(r[8]=[q(" Hoàn tất ",-1)])]),_:1},8,["class"]),c(A,{class:$({hidden:w}),onclick:P},{default:_(()=>[...r[9]||(r[9]=[q(" Tải ảnh ",-1)])]),_:1},8,["class"])])]),content:_(()=>[a("div",rt,[c(C,{name:"Họ và tên",modelValue:n.name,"onUpdate:modelValue":r[0]||(r[0]=s=>n.name=s)},null,8,["modelValue"]),c(C,{name:"Số điện thoại",modelValue:n.phone,"onUpdate:modelValue":r[1]||(r[1]=s=>n.phone=s)},null,8,["modelValue"]),c(C,{name:"Địa chỉ thư điện tử",modelValue:n.email,"onUpdate:modelValue":r[2]||(r[2]=s=>n.email=s)},null,8,["modelValue"]),c(C,{name:"Số phòng",modelValue:n.address,"onUpdate:modelValue":r[3]||(r[3]=s=>n.address=s)},null,8,["modelValue"]),c(C,{name:"Link url fanpage",modelValue:n.url,"onUpdate:modelValue":r[4]||(r[4]=s=>n.url=s)},null,8,["modelValue"]),c(Xe,{name:"Cấp độ (càng cao càng chi tiết; mặc định: thấp)",list:o.value,modelValue:n.errorLevel,"onUpdate:modelValue":r[5]||(r[5]=s=>n.errorLevel=s)},null,8,["list","modelValue"]),c(C,{type:"file",onChange:N,accept:"image/*",name:"Ảnh logo"}),i.value?(u(),j(C,{key:0,name:"Tỉ lệ logo so với gốc",modelValue:n.logoRatio,"onUpdate:modelValue":r[6]||(r[6]=s=>n.logoRatio=s)},null,8,["modelValue"])):x("",!0),L.value?(u(),d("div",lt,[a("a",st,R(L.value),1)])):x("",!0)]),a("div",at,[a("canvas",{ref_key:"qrCode",ref:e,class:"!size-full"},null,512)])]),_:1},512)]),_:1}))}}),ut=le({history:se("/qrcodegen/"),routes:[{path:"/",component:$e},{path:"/qr-contact",component:it},{path:"/:pathMatch(.*)*",component:Ne}]});te(be).use(ut).mount("#app");
