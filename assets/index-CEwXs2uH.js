import{w as ie,v as ue,a as de,c as ce}from"./vue_runtime-dom-Bqn1r05j.js";import{i as me,C as fe}from"./flowbite-BK3zwtRc.js";import{R as pe,c as ge,a as ve}from"./vue-router-BeosvJ7G.js";import{d as S,o as oe,e as F,f as d,j as f,k as i,l as g,m as V,r as le,q as z,s as h,t as K,h as he,b as J,w as ye,u as be,v as ne,x as ae,y as re,F as we,z as xe,A as ke,B as Ce}from"./vue_runtime-core-CbwMzOXN.js";import{x as G,y as m,g as $e}from"./vue_reactivity-C1Gw_TzD.js";import{K as B,p as N,L as Le,q as _e}from"./vue_shared-CljFMYtq.js";import{u as Ve}from"./vueuse_core-Cd5FfhXZ.js";import{j as Re}from"./jsqr-D6czZR4y.js";import{Q as Se}from"./qrcode-9ot_T-Z6.js";import"./popperjs_core-DC5wud4b.js";import"./flowbite-datepicker-BdtIV8Rz.js";import"./vueuse_shared-xNM46b15.js";import"./dijkstrajs-B-FHFk8B.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const n of u.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function o(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(s){if(s.ep)return;s.ep=!0;const u=o(s);fetch(s.href,u)}})();const qe=S({__name:"App",setup(e){return oe(()=>{me()}),(t,o)=>(d(),F(G(pe)))}}),ee=(e,t)=>{const o=e.__vccOpts||e;for(const[r,s]of t)o[r]=s;return o},Ee={},Ne={class:"center h-dvh w-dvw font-mono"},Me={class:"bg--0 flex flex-col items-center rounded-3xl p-10"};function Pe(e,t){const o=le("router-link");return d(),f("div",Ne,[i("div",Me,[t[1]||(t[1]=i("h1",{class:"text-9xl"},"Xin chào",-1)),g(o,{class:"link w-fit font-sans",to:"/qr-contact"},{default:V(()=>[...t[0]||(t[0]=[z("Tạo mã QR lưu danh bạ",-1)])]),_:1})])])}const Te=ee(Ee,[["render",Pe]]),De={},Be={class:"center h-dvh w-dvw font-mono"},Ae={class:"bg--0 flex flex-row items-center rounded-3xl p-10"},Ie={class:"flex flex-col"};function Ue(e,t){const o=le("router-link");return d(),f("div",Be,[i("div",Ae,[t[2]||(t[2]=i("h1",{class:"text-9xl"},"404!",-1)),i("div",Ie,[t[1]||(t[1]=i("a",null,"Trang này chưa tồn tại hoặc có thể đã bị xóa.",-1)),g(o,{class:"link w-fit font-sans",to:"/"},{default:V(()=>[...t[0]||(t[0]=[z("Về trang chủ",-1)])]),_:1})])])])}const je=ee(De,[["render",Ue]]);function te(e){return t=>{e.value=t}}function Fe(){return new Promise(e=>{document.readyState==="complete"?e():window.addEventListener("load",()=>e(),{once:!0})})}function X(e){return new Promise(t=>setTimeout(t,e))}const ze=S({props:{name:{type:String,required:!0}}}),He={class:"material-symbols-outlined aspect-square"};function Oe(e,t,o,r,s,u){return d(),f("span",He,B(e.name),1)}const se=ee(ze,[["render",Oe]]),Qe={class:"p-1"},We=["type","disabled"],Ke={key:1,class:"inset-y-0 start-0 flex items-center justify-center-safe"},W=S({__name:"Button",props:{type:{type:String,default:"button"},theme:{type:String,default:"primary"},buttonRef:{type:Function,required:!1},to:{type:String,required:!1}},setup(e,{expose:t}){const o=m(!1);return t({toggleLoading:()=>o.value=!o.value}),(r,s)=>(d(),f("div",Qe,[e.type!=="link"?(d(),f("button",{key:0,title:"",ref:e.buttonRef,type:e.type,class:N(["w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium",{"text--primary bg--primary hover:text--secondary hover:bg--secondary disabled:bg--secondary disabled:text--secondary":e.theme=="primary","text--tertiary hover:bg--tertiary hover:-text--2":e.theme=="secondary"}]),disabled:o.value},[o.value?h("",!0):K(r.$slots,"default",{key:0}),o.value?(d(),f("div",Ke,[g(se,{name:"progress_activity",class:"animate-spin"})])):h("",!0)],10,We)):h("",!0),e.type==="link"?(d(),f("a",{key:1,class:"link",href:"#",onClick:s[0]||(s[0]=u=>e.to?r.$router.push({name:e.to}):"")},[K(r.$slots,"default")])):h("",!0)]))}});function Z(e){const t=[];for(const o of e)if(o.key==="_content"&&o.children&&Array.isArray(o.children))t.push(...Z(o.children));else{const r={...o};o.children&&Array.isArray(o.children)&&(r.children=Z(o.children)),t.push(r)}return t}const Ge=S({inheritAttrs:!1,setup({},{slots:e,attrs:t}){return()=>Z(e.default?.()).map(o=>he("div",{class:["bg--0","h-fit","flex",t.class]},[o]))}}),Xe=S({__name:"LoadingDiv",setup(e,{expose:t}){const o=m(!1);function r(){o.value=!o.value}return t({toggleHidden:r}),(s,u)=>(d(),f("div",{class:N(["z-50 h-full w-full",{hidden:o.value}])},[...u[0]||(u[0]=[i("div",{class:"bg-dark-0/10 dark:bg-light-0/10 h-full w-full animate-pulse rounded-lg"},null,-1)])],2))}}),Ye={key:0,class:"[&>*]:z-[45]"},Je={key:1,class:"[&>*]:absolute [&>*]:z-[45]"},Ze=S({__name:"Carousel",props:{isCycle:{type:Boolean,default:!1},overflowing:{type:Boolean,default:!1},duration:{type:Number,default:500},cycleDuration:{type:Number,default:3e3},indicator:{type:Object,default:{activeClasses:"bg-white dark:bg-white/80",inactiveClasses:"bg-white/50 dark:bg-white/40 hover:bg-white/90 dark:hover:bg-white/70"}},indicatorsLocation:{type:[String,Object,Array],default:"bottom-5 left-1/2 -translate-x-1/2"}},setup(e,{expose:t}){const o=m(),r=m(),s=m(),u=m(),n=m(),y=m(),A=te(u),v=te(n),q=m(),I=m(0),x=m(),M=J(()=>I.value==1),H=J(()=>I.value==r.value?.childElementCount),C=e;class Y extends fe{async _rotate(p){Object.values(p).forEach(O=>{O.el.classList.remove("hidden")}),await X(1),super._rotate(p),I.value=p.middle.position+1,x.value=p.middle.el,await X(C.duration),p.left.el.classList.add("hidden"),p.right.el.classList.add("hidden")}}return oe(async()=>{const $=Array.from(r.value.children).map((k,c)=>({position:c,el:k})),p=$.map(()=>{const k=document.createElement("button");return k.className="h-3 w-3 rounded-full",k.type="button",k.title="",s.value?.append(k),k}),O={defaultPosition:0,interval:C.cycleDuration,indicators:{...C.indicator,items:Array.from(p).map((k,c)=>({position:c,el:k}))}};ye(Ve(x).height,k=>{o.value.style.height=r.value.style.height=k.toString()+"px"}),await Fe(),y.value=new Y(o.value,$,O,{}),C.isCycle&&y.value.cycle(),n.value?.addEventListener("click",()=>{(!M.value||C.overflowing||C.isCycle)&&y.value?.prev()}),u.value?.addEventListener("click",()=>{(!H.value||C.overflowing||C.isCycle)&&y.value?.next()}),q.value?.toggleHidden()}),t({next:()=>y.value?.next(),previous:()=>y.value?.prev(),toggleLoading:()=>q.value?.toggleHidden()}),($,p)=>(d(),f("div",{ref_key:"carouselElement",ref:o,class:"relative w-full",style:_e({"--duration":e.duration+"ms"})},[g(Xe,{ref_key:"loadingDiv",ref:q,class:"absolute z-40"},null,512),i("div",{ref_key:"carouselWrapper",ref:r,class:"relative h-56 overflow-hidden [&>*]:absolute! [&>*]:w-full [&>*]:duration-(--duration) [&>*]:ease-in-out"},[g(Ge,Le(be($.$attrs)),{default:V(()=>[K($.$slots,"content")]),_:3},16)],512),i("div",{class:N([[e.indicatorsLocation],"absolute z-50 flex space-x-3"]),ref_key:"carouselIndicatorsWrapper",ref:s},null,2),$.$slots.buttons?h("",!0):(d(),f("div",Ye,[i("button",{title:"previous",ref_key:"carouselPrevious",ref:n,type:"button",class:N(["group absolute top-0 left-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!e.overflowing&&!e.isCycle&&M.value}])},[...p[0]||(p[0]=[i("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[i("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[i("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 1 1 5l4 4"})])],-1)])],2),i("button",{title:"next",ref_key:"carouselNext",ref:u,type:"button",class:N(["group absolute top-0 right-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!e.overflowing&&!e.isCycle&&H.value}])},[...p[1]||(p[1]=[i("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[i("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[i("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})])],-1)])],2)])),$.$slots.buttons?(d(),f("div",Je,[K($.$slots,"buttons",{next:G(A),previous:G(v),isEnd:H.value,isStart:M.value})])):h("",!0)],4))}}),et={class:"center h-dvh"},tt={class:"bg--0 tablet:w-lg desktop:w-4xl desktop:min-h-auto tablet:min-h-auto flex h-fit min-h-dvh w-dvw items-center rounded-lg p-8"},ot={key:0,class:"text-3xl font-medium"},lt={class:"desktop:w-md w-full space-y-6"},nt=S({__name:"FormContainer",props:{title:{},buttonHandler:{type:Function}},setup(e){return(t,o)=>(d(),f("div",et,[i("div",tt,[i("form",{class:"desktop:flex-row desktop:justify-between flex size-full flex-col justify-center-safe space-y-6",onSubmit:o[0]||(o[0]=ie((...r)=>t.buttonHandler&&t.buttonHandler(...r),["prevent"]))},[t.title?(d(),f("a",ot,B(t.title),1)):h("",!0),i("div",lt,[K(t.$slots,"default")])],32)])]))}}),at={class:"text--primary bg--0 flex w-full flex-col p-1"},rt={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},st=["value"],it=S({__name:"SelectInput",props:ne({name:{},list:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ae(e,"modelValue");return(o,r)=>(d(),f("div",at,[i("label",rt,B(o.name),1),re(i("select",{class:"border--primary bg--0 text--0 w-full rounded-lg border p-2.5","onUpdate:modelValue":r[0]||(r[0]=s=>t.value=s)},[(d(!0),f(we,null,xe(o.list,s=>(d(),f("option",{key:s[0],value:s[1]},B(s[0]),9,st))),128))],512),[[ue,t.value]])]))}}),ut={class:"text--primary bg--0 flex w-full flex-col p-1"},dt={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},ct={class:"relative z-0"},mt={key:0,class:"pointer-events-none absolute inset-y-0 start-0 flex items-center px-[9px]"},ft={class:"flex justify-center"},pt=["type","disabled","placeholder","multiple","id"],gt={key:0,class:"border--primary text--0 h-10 w-full rounded-l-lg border border-r-0 p-2 overflow-hidden"},R=S({__name:"TextInput",props:ne({name:{type:String,required:!0},type:{type:String,default:"text"},icon:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1},accept:{type:String,default:""},multiple:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=ae(e,"modelValue"),o=ke(),r=m("Chưa có tập tin"),s=e,u=J(()=>({accept:s.accept||void 0})),n=A=>{const v=A.target.files;v&&v.length>0?r.value=s.multiple?v.length+" tập tin":v[0].name:r.value="No file selected"},y=()=>{document.getElementById(o)?.click()};return(A,v)=>(d(),f("div",ut,[i("label",dt,B(e.name),1),i("div",ct,[e.icon?(d(),f("div",mt,[g(se,{name:e.icon.toLowerCase()},null,8,["name"])])):h("",!0),i("div",ft,[re(i("input",Ce({title:"","onUpdate:modelValue":v[0]||(v[0]=q=>t.value=q),class:["border--primary bg--0 text--0 h-10 w-full rounded-lg border p-2",{"ps-10!":e.icon,hidden:e.type=="file"}],type:e.type,disabled:e.disabled,placeholder:e.placeholder,multiple:e.multiple},u.value,{id:G(o),onchange:n}),null,16,pt),[[de,t.value]]),e.type=="file"?(d(),f("span",gt,B(r.value),1)):h("",!0),e.type=="file"?(d(),f("button",{key:1,type:"button",class:"border--primary bg--primary hover:bg--secondary flex h-auto items-center rounded-r-lg border px-4",onclick:y}," Duyệt ")):h("",!0)])])]))}}),vt={class:"right-0 -bottom-15 flex h-8 w-fit items-center justify-center [&>*]:ml-2"},ht={class:"w-full space-y-6"},yt={key:3},bt={class:"text-error"},wt={class:"aspect-square w-full"},xt=S({__name:"QrGenerator",setup(e){const t=m(),o=m(new Map),r=4096,s=m(""),u=m(),n=$e({name:"Phòng Công tác học sinh - sinh viên",email:"phongctct-hssv@tdtu.edu.vn",phone:"02837755054",roomNumber:"A0003",pageLink:"fb.com/pcthssv.tdtu",logoScale:1,errorCorrectionLevel:"L",logoRotation:0,qrMargin:5,rotationStep:90}),y=m(),A=m(),v=m(),q=m(),I=m(),x=m(!1),M=m(""),H=async()=>{t.value.toBlob(c=>{if(!c)return;const l=URL.createObjectURL(c),a=document.createElement("a");a.href=l,a.download=n.name+".png",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},"image/png")},C=()=>{x.value=!x.value},Y=async()=>{if(!x.value){C();return}C(),I.value?.toggleLoading(),v.value?.toggleLoading(),await X(1),n.logoRotation=0;let c=0,l=0;const a=await $(),L=async()=>{const _=Q=>(n.logoScale=Q,u.value.putImageData(a,0,0),p(!0)),w=Math.pow(10,1),{width:T,height:D}=A.value;let E=0,j=Math.floor(1*r/Math.sqrt(T*T+D*D)*w);for(;E<=j&&j/w>c;){const Q=Math.floor((E+j)/2);await _(Q/w)?E=Q+1:j=Q-1}return Math.floor((E+j)/2)/w};await(async()=>{for(let _=n.rotationStep;_<=360;_+=n.rotationStep){n.logoRotation=_;const U=await L();U>c&&(l=_,c=U)}})(),n.logoScale=c,n.logoRotation=l,u.value.putImageData(a,0,0),await p(!1),v.value?.toggleLoading(),I.value?.toggleLoading()},$=async()=>{function c(){const{name:L,phone:b,email:_,roomNumber:U,pageLink:P}=n,w=L,T="",D="",E=[w,T,D,"",""].join(";"),j=`${w} ${D} ${T}`.trim();return{qrContact:`
BEGIN:VCARD
VERSION:3.0
N:${E}
FN:${j}
TEL;TYPE=cell:${b}
EMAIL;INTERNET;PREF:${_}
ADR;TYPE=WORK;PREF=1;LABEL="":;Trường Đại học Tôn Đức Thắng;Phòng ${U};phường Tân Phong;19 Nguyễn Hữu Thọ;Thành phố Hồ Chí Minh;Việt Nam
URL:${P}
END:VCARD
  `.trim(),qrPhone:`MECARD:TEL:${b};;`}}const{qrContact:l}=c(),a={margin:n.qrMargin,width:r,errorCorrectionLevel:n.errorCorrectionLevel};return s.value=l,await Se.toCanvas(t.value,l,a),u.value=t.value.getContext("2d",{willReadFrequently:!0}),u.value.getImageData(0,0,r,r)},p=async(c=!1)=>{M.value="",typeof c!="boolean"&&(c=!1),c||(q.value?.toggleLoading(),v.value?.toggleLoading(),await X(1),await $()),await y.value?.();try{const{data:l}=Re(u.value.getImageData(0,0,r,r).data,r,r);if(l!==s.value)throw new Error;if(c)return!0;t.value.style.rotate=`-${n.logoRotation}deg`,v.value?.next()}catch{if(c)return!1;M.value="Logo quá lớn, không thể nhận dạng."}return q.value?.toggleLoading(),v.value?.toggleLoading(),!1};async function O(c){const l=c.target;if(l.files&&l.files[0]){const a=l.files[0];A.value=await k(a),y.value=async()=>new Promise((L,b)=>{const _=new FileReader;_.onload=U=>{const P=new Image;P.onload=()=>{if(t.value){const w=u.value,T=t.value,D=P.width*n.logoScale,E=P.height*n.logoScale;w&&(w.save(),w.translate(T.width/2,T.height/2),w.rotate(n.logoRotation/180*Math.PI),w.drawImage(P,-D/2,-E/2,D,E),w.restore(),L()),b("Canvas not found")}b("Invalid QR content")},P.src=U.target?.result},_.readAsDataURL(a)})}else y.value=void 0}function k(c){return new Promise((l,a)=>{const L=new FileReader;L.onload=()=>{const b=new Image;b.onload=()=>{l({width:b.width,height:b.height})},b.onerror=()=>{a(new Error("Unable to load image."))},b.src=L.result},L.onerror=()=>{a(new Error("Error reading file."))},L.readAsDataURL(c)})}return o.value.set("Cao","H"),o.value.set("Trung bình","M"),o.value.set("Thấp","L"),(c,l)=>(d(),F(nt,{"button-handler":p,title:"Tạo QR lưu danh bạ"},{default:V(()=>[g(Ze,{"indicators-location":"-bottom-15 p-1 hidden",indicator:{activeClasses:"bg-light-primary/90",inactiveClasses:"bg-light-primary/50 hover:bg-light-primary/70"},class:"mb-20 min-h-30",ref_key:"carousel",ref:v},{buttons:V(({isEnd:a,previous:L,isStart:b})=>[i("div",vt,[x.value?(d(),F(W,{key:0,theme:"secondary",onclick:C},{default:V(()=>[...l[10]||(l[10]=[z(" Quay lại ",-1)])]),_:1})):h("",!0),g(W,{theme:x.value?"primary":"secondary",class:N({hidden:y.value==null||a}),onclick:Y,ref_key:"autoAlignLogoButton",ref:I},{default:V(()=>[z(B(x.value?"Xác nhận":"Tự động căn chỉnh logo"),1)]),_:1},8,["theme","class"]),g(W,{"button-ref":L,theme:"secondary",class:N({hidden:b})},{default:V(()=>[...l[11]||(l[11]=[z(" Trở về ",-1)])]),_:1},8,["button-ref","class"]),x.value?h("",!0):(d(),F(W,{key:1,ref_key:"submitButton",ref:q,class:N({hidden:a}),onclick:p},{default:V(()=>[...l[12]||(l[12]=[z(" Hoàn tất ",-1)])]),_:1},8,["class"])),g(W,{class:N({hidden:b}),onclick:H},{default:V(()=>[...l[13]||(l[13]=[z(" Tải ảnh ",-1)])]),_:1},8,["class"])])]),content:V(()=>[i("div",ht,[g(R,{name:"Họ và tên",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=a=>n.name=a)},null,8,["modelValue"]),g(R,{name:"Số điện thoại",modelValue:n.phone,"onUpdate:modelValue":l[1]||(l[1]=a=>n.phone=a)},null,8,["modelValue"]),g(R,{name:"Địa chỉ thư điện tử",modelValue:n.email,"onUpdate:modelValue":l[2]||(l[2]=a=>n.email=a)},null,8,["modelValue"]),g(R,{name:"Số phòng",modelValue:n.roomNumber,"onUpdate:modelValue":l[3]||(l[3]=a=>n.roomNumber=a)},null,8,["modelValue"]),g(R,{name:"Link pageLink fanpage",modelValue:n.pageLink,"onUpdate:modelValue":l[4]||(l[4]=a=>n.pageLink=a)},null,8,["modelValue"]),g(it,{name:"Cấp độ (càng cao, mã QR càng chi tiết)",list:o.value,modelValue:n.errorCorrectionLevel,"onUpdate:modelValue":l[5]||(l[5]=a=>n.errorCorrectionLevel=a)},null,8,["list","modelValue"]),g(R,{type:"file",onChange:O,accept:"image/*",name:"Ảnh logo"}),y.value&&!x.value?(d(),F(R,{key:0,type:"number",name:"Tỉ lệ logo so với gốc",modelValue:n.logoScale,"onUpdate:modelValue":l[6]||(l[6]=a=>n.logoScale=a)},null,8,["modelValue"])):h("",!0),y.value&&!x.value?(d(),F(R,{key:1,type:"number",name:"Độ lớn góc xoay mã QR",modelValue:n.logoRotation,"onUpdate:modelValue":l[7]||(l[7]=a=>n.logoRotation=a)},null,8,["modelValue"])):h("",!0),g(R,{type:"number",name:"Độ lớn viền trắng",modelValue:n.qrMargin,"onUpdate:modelValue":l[8]||(l[8]=a=>n.qrMargin=a)},null,8,["modelValue"]),x.value?(d(),F(R,{key:2,type:"number",name:"Độ lớn bước góc xoay mã QR",modelValue:n.rotationStep,"onUpdate:modelValue":l[9]||(l[9]=a=>n.rotationStep=a)},null,8,["modelValue"])):h("",!0),M.value?(d(),f("div",yt,[i("a",bt,B(M.value),1)])):h("",!0)]),i("div",wt,[i("canvas",{ref_key:"qrCode",ref:t,class:"!size-full"},null,512)])]),_:1},512)]),_:1}))}}),kt=ge({history:ve("/qrcodegen/"),routes:[{path:"/",component:Te},{path:"/qr-contact",component:xt},{path:"/:pathMatch(.*)*",component:je}]});ce(qe).use(kt).mount("#app");
