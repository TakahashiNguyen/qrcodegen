import{w as le,v as re,a as ae,c as se}from"./vue_runtime-dom-Bqn1r05j.js";import{i as ie,C as ue}from"./flowbite-BK3zwtRc.js";import{R as de,c as ce,a as fe}from"./vue-router-BeosvJ7G.js";import{d as k,o as K,e as F,f as c,j as m,k as s,l as g,m as x,r as G,q,s as y,t as B,h as me,b as U,w as pe,u as ge,v as Y,x as X,y as J,F as he,z as ve,A as ye,B as be}from"./vue_runtime-core-CbwMzOXN.js";import{x as M,y as p,g as we}from"./vue_reactivity-C1Gw_TzD.js";import{K as S,p as _,L as xe,q as ke}from"./vue_shared-CljFMYtq.js";import{u as $e}from"./vueuse_core-Cd5FfhXZ.js";import{e as _e}from"./qr-scanner-B7z2R3KM.js";import{Q as Ce}from"./qrcode-9ot_T-Z6.js";import"./popperjs_core-DC5wud4b.js";import"./flowbite-datepicker-BdtIV8Rz.js";import"./vueuse_shared-xNM46b15.js";import"./dijkstrajs-B-FHFk8B.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function l(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(n){if(n.ep)return;n.ep=!0;const u=l(n);fetch(n.href,u)}})();const Le=k({__name:"App",setup(t){return K(()=>{ie()}),(o,l)=>(c(),F(M(de)))}}),z=(t,o)=>{const l=t.__vccOpts||t;for(const[a,n]of o)l[a]=n;return l},Ve={},Re={class:"center h-dvh w-dvw font-mono"},Ee={class:"bg--0 flex flex-col items-center rounded-3xl p-10"};function Ne(t,o){const l=G("router-link");return c(),m("div",Re,[s("div",Ee,[o[1]||(o[1]=s("h1",{class:"text-9xl"},"Xin chào",-1)),g(l,{class:"link w-fit font-sans",to:"/qr-contact"},{default:x(()=>[...o[0]||(o[0]=[q("Tạo mã QR lưu danh bạ",-1)])]),_:1})])])}const Se=z(Ve,[["render",Ne]]),qe={},Te={class:"center h-dvh w-dvw font-mono"},Be={class:"bg--0 flex flex-row items-center rounded-3xl p-10"},Pe={class:"flex flex-col"};function De(t,o){const l=G("router-link");return c(),m("div",Te,[s("div",Be,[o[2]||(o[2]=s("h1",{class:"text-9xl"},"404!",-1)),s("div",Pe,[o[1]||(o[1]=s("a",null,"Trang này chưa tồn tại hoặc có thể đã bị xóa.",-1)),g(l,{class:"link w-fit font-sans",to:"/"},{default:x(()=>[...o[0]||(o[0]=[q("Về trang chủ",-1)])]),_:1})])])])}const Me=z(qe,[["render",De]]);function Q(t){return o=>{t.value=o}}function je(){return new Promise(t=>{document.readyState==="complete"?t():window.addEventListener("load",()=>t(),{once:!0})})}function A(t){return new Promise(o=>setTimeout(o,t))}const Fe=k({props:{name:{type:String,required:!0}}}),Ue={class:"material-symbols-outlined aspect-square"};function Ae(t,o,l,a,n,u){return c(),m("span",Ue,S(t.name),1)}const Z=z(Fe,[["render",Ae]]),Oe={class:"p-1"},ze=["type","disabled"],Ie={key:1,class:"inset-y-0 start-0 flex items-center justify-center-safe"},D=k({__name:"Button",props:{type:{type:String,default:"button"},theme:{type:String,default:"primary"},buttonRef:{type:Function,required:!1},to:{type:String,required:!1}},setup(t,{expose:o}){const l=p(!1);return o({toggleLoading:()=>l.value=!l.value}),(a,n)=>(c(),m("div",Oe,[t.type!=="link"?(c(),m("button",{key:0,title:"",ref:t.buttonRef,type:t.type,class:_(["w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium",{"text--primary bg--primary hover:text--secondary hover:bg--secondary disabled:bg--secondary disabled:text--secondary":t.theme=="primary","text--tertiary hover:bg--tertiary hover:-text--2":t.theme=="secondary"}]),disabled:l.value},[l.value?y("",!0):B(a.$slots,"default",{key:0}),l.value?(c(),m("div",Ie,[g(Z,{name:"progress_activity",class:"animate-spin"})])):y("",!0)],10,ze)):y("",!0),t.type==="link"?(c(),m("a",{key:1,class:"link",href:"#",onClick:n[0]||(n[0]=u=>t.to?a.$router.push({name:t.to}):"")},[B(a.$slots,"default")])):y("",!0)]))}});function O(t){const o=[];for(const l of t)if(l.key==="_content"&&l.children&&Array.isArray(l.children))o.push(...O(l.children));else{const a={...l};l.children&&Array.isArray(l.children)&&(a.children=O(l.children)),o.push(a)}return o}const He=k({inheritAttrs:!1,setup({},{slots:t,attrs:o}){return()=>O(t.default?.()).map(l=>me("div",{class:["bg--0","h-fit","flex",o.class]},[l]))}}),We=k({__name:"LoadingDiv",setup(t,{expose:o}){const l=p(!1);function a(){l.value=!l.value}return o({toggleHidden:a}),(n,u)=>(c(),m("div",{class:_(["h-full w-full bg-white dark:bg-black",{hidden:l.value}])},[...u[0]||(u[0]=[s("div",{class:"h-full w-full animate-pulse bg-black/10 dark:bg-white/10"},null,-1)])],2))}}),Qe={key:0,class:"[&>*]:z-[45]"},Ke={key:1,class:"[&>*]:absolute [&>*]:z-[45]"},Ge=k({__name:"Carousel",props:{isCycle:{type:Boolean,default:!1},overflowing:{type:Boolean,default:!1},duration:{type:Number,default:500},cycleDuration:{type:Number,default:3e3},indicator:{type:Object,default:{activeClasses:"bg-white dark:bg-white/80",inactiveClasses:"bg-white/50 dark:bg-white/40 hover:bg-white/90 dark:hover:bg-white/70"}},indicatorsLocation:{type:[String,Object,Array],default:"bottom-5 left-1/2 -translate-x-1/2"}},setup(t,{expose:o}){const l=p(),a=p(),n=p(),u=p(),h=p(),b=p(),C=Q(u),v=Q(h),L=p(),V=p(0),P=p(),T=U(()=>V.value==1),R=U(()=>V.value==a.value?.childElementCount),w=t;class j extends ue{async _rotate(e){Object.values(e).forEach(r=>{r.el.classList.remove("hidden")}),await A(1),super._rotate(e),V.value=e.middle.position+1,P.value=e.middle.el,await A(w.duration),e.left.el.classList.add("hidden"),e.right.el.classList.add("hidden")}}return K(async()=>{const i=Array.from(a.value.children).map((d,f)=>({position:f,el:d})),e=i.map(()=>{const d=document.createElement("button");return d.className="h-3 w-3 rounded-full",d.type="button",d.title="",n.value?.append(d),d}),r={defaultPosition:0,interval:w.cycleDuration,indicators:{...w.indicator,items:Array.from(e).map((d,f)=>({position:f,el:d}))}};pe($e(P).height,d=>{l.value.style.height=a.value.style.height=d.toString()+"px"}),await je(),b.value=new j(l.value,i,r,{}),w.isCycle&&b.value.cycle(),h.value?.addEventListener("click",()=>{(!T.value||w.overflowing||w.isCycle)&&b.value?.prev()}),u.value?.addEventListener("click",()=>{(!R.value||w.overflowing||w.isCycle)&&b.value?.next()}),L.value?.toggleHidden()}),o({next:()=>b.value?.next(),previous:()=>b.value?.prev()}),(i,e)=>(c(),m("div",{ref_key:"carouselElement",ref:l,class:"relative w-full",style:ke({"--duration":t.duration+"ms"})},[g(We,{ref_key:"loadingDiv",ref:L,class:"absolute z-40"},null,512),s("div",{ref_key:"carouselWrapper",ref:a,class:"relative h-56 overflow-hidden [&>*]:absolute! [&>*]:w-full [&>*]:duration-(--duration) [&>*]:ease-in-out"},[g(He,xe(ge(i.$attrs)),{default:x(()=>[B(i.$slots,"content")]),_:3},16)],512),s("div",{class:_([[t.indicatorsLocation],"absolute z-50 flex space-x-3"]),ref_key:"carouselIndicatorsWrapper",ref:n},null,2),i.$slots.buttons?y("",!0):(c(),m("div",Qe,[s("button",{title:"previous",ref_key:"carouselPrevious",ref:h,type:"button",class:_(["group absolute top-0 left-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&T.value}])},[...e[0]||(e[0]=[s("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[s("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[s("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 1 1 5l4 4"})])],-1)])],2),s("button",{title:"next",ref_key:"carouselNext",ref:u,type:"button",class:_(["group absolute top-0 right-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&R.value}])},[...e[1]||(e[1]=[s("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[s("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[s("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})])],-1)])],2)])),i.$slots.buttons?(c(),m("div",Ke,[B(i.$slots,"buttons",{next:M(C),previous:M(v),isEnd:R.value,isStart:T.value})])):y("",!0)],4))}}),Ye={class:"center h-dvh"},Xe={class:"bg--0 tablet:w-lg desktop:w-4xl desktop:min-h-auto tablet:min-h-auto flex h-fit min-h-dvh w-dvw items-center rounded-lg p-8"},Je={key:0,class:"text-3xl font-medium"},Ze={class:"desktop:w-md w-full space-y-6"},et=k({__name:"FormContainer",props:{title:{},buttonHandler:{type:Function}},setup(t){return(o,l)=>(c(),m("div",Ye,[s("div",Xe,[s("form",{class:"desktop:flex-row desktop:justify-between flex size-full flex-col justify-center-safe space-y-6",onSubmit:l[0]||(l[0]=le((...a)=>o.buttonHandler&&o.buttonHandler(...a),["prevent"]))},[o.title?(c(),m("h5",Je,S(o.title),1)):y("",!0),s("div",Ze,[B(o.$slots,"default")])],32)])]))}}),tt={class:"text--primary bg--0 flex w-full flex-col p-1"},ot={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},nt=["value"],lt=k({__name:"SelectInput",props:Y({name:{},list:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const o=X(t,"modelValue");return(l,a)=>(c(),m("div",tt,[s("label",ot,S(l.name),1),J(s("select",{class:"border--primary bg--0 text--0 w-full rounded-lg border p-2.5","onUpdate:modelValue":a[0]||(a[0]=n=>o.value=n)},[(c(!0),m(he,null,ve(l.list,n=>(c(),m("option",{key:n[0],value:n[1]},S(n[0].replace("_"," ")),9,nt))),128))],512),[[re,o.value]])]))}}),rt={class:"text--primary bg--0 flex w-full flex-col p-1"},at={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},st={class:"relative z-0"},it={key:0,class:"pointer-events-none absolute inset-y-0 start-0 flex items-center px-[9px]"},ut={class:"flex justify-center"},dt=["type","disabled","placeholder","multiple","id"],ct={key:0,class:"border--primary text--0 h-10 w-full rounded-l-lg border border-r-0 p-2 overflow-hidden"},N=k({__name:"TextInput",props:Y({name:{type:String,required:!0},type:{type:String,default:"text"},icon:{type:String,required:!1},placeholder:{type:String,required:!1},disabled:{type:Boolean,required:!1},accept:{type:String,default:""},multiple:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const o=X(t,"modelValue"),l=ye(),a=p("Chưa có tập tin"),n=t,u=U(()=>({accept:n.accept||void 0})),h=C=>{const v=C.target.files;v&&v.length>0?a.value=n.multiple?v.length+" tập tin":v[0].name:a.value="No file selected"},b=()=>{document.getElementById(l)?.click()};return(C,v)=>(c(),m("div",rt,[s("label",at,S(t.name),1),s("div",st,[t.icon?(c(),m("div",it,[g(Z,{name:t.icon.toLowerCase()},null,8,["name"])])):y("",!0),s("div",ut,[J(s("input",be({title:"","onUpdate:modelValue":v[0]||(v[0]=L=>o.value=L),class:["border--primary bg--0 text--0 h-10 w-full rounded-lg border p-2",{"ps-10!":t.icon,hidden:t.type=="file"}],type:t.type,disabled:t.disabled,placeholder:t.placeholder,multiple:t.multiple},u.value,{id:M(l),onchange:h}),null,16,dt),[[ae,o.value]]),t.type=="file"?(c(),m("span",ct,S(a.value),1)):y("",!0),t.type=="file"?(c(),m("button",{key:1,type:"button",class:"border--primary bg--primary hover:bg--secondary flex h-auto items-center rounded-r-lg border px-4",onclick:b}," Duyệt ")):y("",!0)])])]))}}),ft={class:"right-0 -bottom-15 flex h-8 w-fit items-center justify-center [&>*]:ml-2"},mt={class:"w-full space-y-6"},pt={key:1},gt={class:"text-error"},ht={class:"aspect-square w-full"},vt=k({__name:"QrGenerator",setup(t){const o=p(),l=p(new Map),a=4096,n=we({name:"",email:"",phone:"",address:"",url:"",logoRatio:1,errorLevel:"L"}),u=new FileReader,h=p(),b=p(),C=p(),v=p(),L=p(),V=p(""),P=async()=>{o.value.toBlob(i=>{if(!i)return;const e=URL.createObjectURL(i),r=document.createElement("a");r.href=e,r.download=n.name+".png",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)},"image/png")},T=async()=>{L.value?.toggleLoading();const i=E=>(n.logoRatio=E,R(!0)),e=10,{width:r,height:d}=b.value;let f=0,$=Math.ceil(a/Math.max(r,d))*e;for(;f<=$;){const E=Math.floor((f+$)/2);await i(E/e)?f=E+1:$=E-1}C.value?.next(),L.value?.toggleLoading()},R=async(i=!1)=>{V.value="",typeof i!="boolean"&&(i=!1),i||v.value?.toggleLoading();function e(){const{name:f,phone:$,email:E,address:ee,url:te}=n,I=f,H="",W="",oe=[I,H,W,"",""].join(";"),ne=`${I} ${W} ${H}`.trim();return{qrContact:`
BEGIN:VCARD
VERSION:3.0
N:${oe}
FN:${ne}
TEL;TYPE=cell:${$}
EMAIL;INTERNET;PREF:${E}
ADR;TYPE=WORK;PREF=1;LABEL="":;Trường Đại học Tôn Đức Thắng;Phòng ${ee};phường Tân Phong;19 Nguyễn Hữu Thọ;Thành phố Hồ Chí Minh;Việt Nam
URL:${te}
END:VCARD
  `.trim(),qrPhone:`MECARD:TEL:${$};;`}}const{qrContact:r}=e(),d={margin:5,width:a,errorCorrectionLevel:n.errorLevel};Ce.toCanvas(o.value,r,d),h.value?.(),await A(10);try{if(await _e.scanImage(o.value,{})!==r)throw new Error;if(i)return!0;C.value?.next()}catch{if(i)return!1;V.value="Logo quá lớn, không thể nhận dạng."}return v.value?.toggleLoading(),!1};u.onload=i=>{const e=new Image;e.onload=()=>{if(o.value){const r=o.value.getContext("2d"),d=o.value,f=e.width*n.logoRatio,$=e.height*n.logoRatio;r&&r.drawImage(e,(d.width-f)/2,(d.height-$)/2,f,$)}},e.src=i.target?.result};async function w(i){const e=i.target;if(e.files&&e.files[0]){const r=e.files[0];b.value=await j(r),h.value=()=>u.readAsDataURL(r)}}function j(i){return new Promise((e,r)=>{const d=new FileReader;d.onload=()=>{const f=new Image;f.onload=()=>{e({width:f.width,height:f.height})},f.onerror=()=>{r(new Error("Unable to load image."))},f.src=d.result},d.onerror=()=>{r(new Error("Error reading file."))},d.readAsDataURL(i)})}return l.value.set("Cao","high"),l.value.set("Trung bình","medium"),l.value.set("Thấp","low"),(i,e)=>(c(),F(et,{"button-handler":R,title:"Tạo QR lưu danh bạ"},{default:x(()=>[g(Ge,{"indicators-location":"-bottom-15 p-1 hidden",indicator:{activeClasses:"bg-light-primary/90",inactiveClasses:"bg-light-primary/50 hover:bg-light-primary/70"},class:"mb-20 min-h-30",ref_key:"carousel",ref:C},{buttons:x(({isEnd:r,previous:d,isStart:f})=>[s("div",ft,[g(D,{theme:"secondary",class:_({hidden:h.value==null||r}),onclick:T,ref_key:"autoAlignLogoButton",ref:L},{default:x(()=>[...e[7]||(e[7]=[q(" Tự động căn chỉnh logo ",-1)])]),_:1},8,["class"]),g(D,{"button-ref":d,theme:"secondary",class:_({hidden:f})},{default:x(()=>[...e[8]||(e[8]=[q(" Trở về ",-1)])]),_:1},8,["button-ref","class"]),g(D,{ref_key:"submitButton",ref:v,class:_({hidden:r}),onclick:R},{default:x(()=>[...e[9]||(e[9]=[q(" Hoàn tất ",-1)])]),_:1},8,["class"]),g(D,{class:_({hidden:f}),onclick:P},{default:x(()=>[...e[10]||(e[10]=[q(" Tải ảnh ",-1)])]),_:1},8,["class"])])]),content:x(()=>[s("div",mt,[g(N,{name:"Họ và tên",modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=r=>n.name=r)},null,8,["modelValue"]),g(N,{name:"Số điện thoại",modelValue:n.phone,"onUpdate:modelValue":e[1]||(e[1]=r=>n.phone=r)},null,8,["modelValue"]),g(N,{name:"Địa chỉ thư điện tử",modelValue:n.email,"onUpdate:modelValue":e[2]||(e[2]=r=>n.email=r)},null,8,["modelValue"]),g(N,{name:"Số phòng",modelValue:n.address,"onUpdate:modelValue":e[3]||(e[3]=r=>n.address=r)},null,8,["modelValue"]),g(N,{name:"Link url fanpage",modelValue:n.url,"onUpdate:modelValue":e[4]||(e[4]=r=>n.url=r)},null,8,["modelValue"]),g(lt,{name:"Cấp độ (càng cao càng chi tiết; mặc định: thấp)",list:l.value,modelValue:n.errorLevel,"onUpdate:modelValue":e[5]||(e[5]=r=>n.errorLevel=r)},null,8,["list","modelValue"]),g(N,{type:"file",onChange:w,accept:"image/*",name:"Ảnh logo"}),h.value?(c(),F(N,{key:0,name:"Tỉ lệ logo so với gốc",modelValue:n.logoRatio,"onUpdate:modelValue":e[6]||(e[6]=r=>n.logoRatio=r)},null,8,["modelValue"])):y("",!0),V.value?(c(),m("div",pt,[s("a",gt,S(V.value),1)])):y("",!0)]),s("div",ht,[s("canvas",{ref_key:"qrCode",ref:o,class:"!size-full"},null,512)])]),_:1},512)]),_:1}))}}),yt=ce({history:fe("/qrcodegen/"),routes:[{path:"/",component:Se},{path:"/qr-contact",component:vt},{path:"/:pathMatch(.*)*",component:Me}]});se(Le).use(yt).mount("#app");
