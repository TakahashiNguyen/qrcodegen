import{w as W,v as Q,c as K}from"./vue_runtime-dom-BCjqVyA5.js";import{i as G,C as Y}from"./flowbite-BK3zwtRc.js";import{R as X,c as J,a as Z}from"./vue-router-7OPWzMCz.js";import{d as k,o as U,e as z,f as u,j as f,k as l,l as c,m as x,r as H,q as L,s as V,t as N,h as ee,b as j,w as te,u as oe,v as ne,x as re,y as le,z as se}from"./vue_runtime-core-C5Bf7rsQ.js";import{u as D,l as h,g as ae}from"./vue_reactivity-BF73Jxev.js";import{p as _,K as ie,q as ue,L as S}from"./vue_shared-C7soI7TJ.js";import{u as de}from"./vueuse_core-CdB5f5mt.js";import{e as ce}from"./qr-scanner-B7z2R3KM.js";import{Q as fe}from"./qrcode-9ot_T-Z6.js";import"./popperjs_core-DC5wud4b.js";import"./flowbite-datepicker-BdtIV8Rz.js";import"./vueuse_shared-likAaBX4.js";import"./dijkstrajs-B-FHFk8B.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const me=k({__name:"App",setup(o){return U(()=>{G()}),(e,t)=>(u(),z(D(X)))}}),F=(o,e)=>{const t=o.__vccOpts||o;for(const[i,s]of e)t[i]=s;return t},pe={},he={class:"center h-dvh w-dvw font-mono"},ge={class:"bg--0 flex flex-col items-center rounded-3xl p-10"};function ve(o,e){const t=H("router-link");return u(),f("div",he,[l("div",ge,[e[1]||(e[1]=l("h1",{class:"text-9xl"},"Xin chào",-1)),c(t,{class:"link w-fit font-sans",to:"/qr-contact"},{default:x(()=>[...e[0]||(e[0]=[L("Tạo mã QR lưu danh bạ",-1)])]),_:1})])])}const ye=F(pe,[["render",ve]]),we={},be={class:"center h-dvh w-dvw font-mono"},xe={class:"bg--0 flex flex-row items-center rounded-3xl p-10"},ke={class:"flex flex-col"};function $e(o,e){const t=H("router-link");return u(),f("div",be,[l("div",xe,[e[2]||(e[2]=l("h1",{class:"text-9xl"},"404!",-1)),l("div",ke,[e[1]||(e[1]=l("a",null,"Trang này chưa tồn tại hoặc có thể đã bị xóa.",-1)),c(t,{class:"link w-fit font-sans",to:"/"},{default:x(()=>[...e[0]||(e[0]=[L("Về trang chủ",-1)])]),_:1})])])])}const _e=F(we,[["render",$e]]);function M(o){return e=>{o.value=e}}function Ce(){return new Promise(o=>{document.readyState==="complete"?o():window.addEventListener("load",()=>o(),{once:!0})})}function B(o){return new Promise(e=>setTimeout(e,o))}const Ve={class:"p-1"},Re=["type"],A=k({__name:"Button",props:{type:{type:String,default:"button"},theme:{type:String,default:"primary"},buttonRef:{type:Function,required:!1},to:{type:String,required:!1}},setup(o){return(e,t)=>(u(),f("div",Ve,[o.type!=="link"?(u(),f("button",{key:0,title:"",ref:o.buttonRef,type:o.type,class:_(["w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium",{"text--primary bg--primary hover:text--secondary hover:bg--secondary":o.theme=="primary","text--tertiary hover:bg--tertiary hover:-text--2":o.theme=="secondary"}])},[N(e.$slots,"default")],10,Re)):V("",!0),o.type==="link"?(u(),f("a",{key:1,class:"link",href:"#",onClick:t[0]||(t[0]=i=>o.to?e.$router.push({name:o.to}):"")},[N(e.$slots,"default")])):V("",!0)]))}});function O(o){const e=[];for(const t of o)if(t.key==="_content"&&t.children&&Array.isArray(t.children))e.push(...O(t.children));else{const i={...t};t.children&&Array.isArray(t.children)&&(i.children=O(t.children)),e.push(i)}return e}const Ee=k({inheritAttrs:!1,setup({},{slots:o,attrs:e}){return()=>O(o.default?.()).map(t=>ee("div",{class:["bg--0","h-fit","flex",e.class]},[t]))}}),Le=k({__name:"LoadingDiv",setup(o,{expose:e}){const t=h(!1);function i(){t.value=!t.value}return e({toggleHidden:i}),(s,a)=>(u(),f("div",{class:_(["h-full w-full bg-white dark:bg-black",{hidden:t.value}])},[...a[0]||(a[0]=[l("div",{class:"h-full w-full animate-pulse bg-black/10 dark:bg-white/10"},null,-1)])],2))}}),Ne={key:0,class:"[&>*]:z-[45]"},qe={key:1,class:"[&>*]:absolute [&>*]:z-[45]"},Se=k({__name:"Carousel",props:{isCycle:{type:Boolean,default:!1},overflowing:{type:Boolean,default:!1},duration:{type:Number,default:500},cycleDuration:{type:Number,default:3e3},indicator:{type:Object,default:{activeClasses:"bg-white dark:bg-white/80",inactiveClasses:"bg-white/50 dark:bg-white/40 hover:bg-white/90 dark:hover:bg-white/70"}},indicatorsLocation:{type:[String,Object,Array],default:"bottom-5 left-1/2 -translate-x-1/2"}},setup(o,{expose:e}){const t=h(),i=h(),s=h(),a=h(),m=h(),$=h(),q=M(a),P=M(m),v=h(),n=h(0),r=h(),w=j(()=>n.value==1),y=j(()=>n.value==i.value?.childElementCount),g=o;class T extends Y{async _rotate(d){Object.values(d).forEach(R=>{R.el.classList.remove("hidden")}),await B(1),super._rotate(d),n.value=d.middle.position+1,r.value=d.middle.el,await B(g.duration),d.left.el.classList.add("hidden"),d.right.el.classList.add("hidden")}}return U(async()=>{const b=Array.from(i.value.children).map((p,E)=>({position:E,el:p})),d=b.map(()=>{const p=document.createElement("button");return p.className="h-3 w-3 rounded-full",p.type="button",p.title="",s.value?.append(p),p}),R={defaultPosition:0,interval:g.cycleDuration,indicators:{...g.indicator,items:Array.from(d).map((p,E)=>({position:E,el:p}))}};te(de(r).height,p=>{t.value.style.height=i.value.style.height=p.toString()+"px"}),await Ce(),$.value=new T(t.value,b,R,{}),g.isCycle&&$.value.cycle(),m.value?.addEventListener("click",()=>{(!w.value||g.overflowing||g.isCycle)&&$.value?.prev()}),a.value?.addEventListener("click",()=>{(!y.value||g.overflowing||g.isCycle)&&$.value?.next()}),v.value?.toggleHidden()}),e({next:()=>$.value?.next(),previous:()=>$.value?.prev()}),(b,d)=>(u(),f("div",{ref_key:"carouselElement",ref:t,class:"relative w-full",style:ue({"--duration":o.duration+"ms"})},[c(Le,{ref_key:"loadingDiv",ref:v,class:"absolute z-40"},null,512),l("div",{ref_key:"carouselWrapper",ref:i,class:"relative h-56 overflow-hidden [&>*]:absolute! [&>*]:w-full [&>*]:duration-(--duration) [&>*]:ease-in-out"},[c(Ee,ie(oe(b.$attrs)),{default:x(()=>[N(b.$slots,"content")]),_:3},16)],512),l("div",{class:_([[o.indicatorsLocation],"absolute z-50 flex space-x-3"]),ref_key:"carouselIndicatorsWrapper",ref:s},null,2),b.$slots.buttons?V("",!0):(u(),f("div",Ne,[l("button",{title:"previous",ref_key:"carouselPrevious",ref:m,type:"button",class:_(["group absolute top-0 left-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!o.overflowing&&!o.isCycle&&w.value}])},[...d[0]||(d[0]=[l("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[l("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[l("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 1 1 5l4 4"})])],-1)])],2),l("button",{title:"next",ref_key:"carouselNext",ref:a,type:"button",class:_(["group absolute top-0 right-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!o.overflowing&&!o.isCycle&&y.value}])},[...d[1]||(d[1]=[l("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[l("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[l("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})])],-1)])],2)])),b.$slots.buttons?(u(),f("div",qe,[N(b.$slots,"buttons",{next:D(q),previous:D(P),isEnd:y.value,isStart:w.value})])):V("",!0)],4))}}),Pe={class:"center h-dvh"},Te={class:"bg--0 tablet:w-lg desktop:w-4xl desktop:min-h-auto tablet:min-h-auto flex h-fit min-h-dvh w-dvw items-center rounded-lg p-8"},Ae={key:0,class:"text-3xl font-medium"},je={class:"desktop:w-md w-full space-y-6"},De=k({__name:"FormContainer",props:{title:{},buttonHandler:{type:Function}},setup(o){return(e,t)=>(u(),f("div",Pe,[l("div",Te,[l("form",{class:"desktop:flex-row desktop:justify-between flex size-full flex-col justify-center-safe space-y-6",onSubmit:t[0]||(t[0]=W((...i)=>e.buttonHandler&&e.buttonHandler(...i),["prevent"]))},[e.title?(u(),f("h5",Ae,S(e.title),1)):V("",!0),l("div",je,[N(e.$slots,"default")])],32)])]))}}),Be=k({props:{name:{type:String,required:!0}}}),Oe={class:"material-symbols-outlined aspect-square"};function Fe(o,e,t,i,s,a){return u(),f("span",Oe,S(o.name),1)}const Me=F(Be,[["render",Fe]]),Ue={class:"text--primary bg--0 flex w-full flex-col p-1"},ze={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},He={class:"relative z-0"},Ie={key:0,class:"pointer-events-none absolute inset-y-0 start-0 flex items-center px-[9px]"},We=["type","disabled","placeholder"],C=k({__name:"TextInput",props:ne({name:{type:String,required:!0},type:{type:String,default:"text"},icon:{type:String,required:!1},placeholder:{type:String,required:!1},disable:{type:Boolean,required:!1},accept:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const e=re(o,"modelValue"),t=o,i=j(()=>({accept:t.accept||void 0}));return(s,a)=>(u(),f("div",Ue,[l("label",ze,S(o.name),1),l("div",He,[o.icon?(u(),f("div",Ie,[c(Me,{name:o.icon.toLowerCase()},null,8,["name"])])):V("",!0),le(l("input",se({title:"","onUpdate:modelValue":a[0]||(a[0]=m=>e.value=m),class:["border--primary bg--0 text--0 w-full rounded-lg border p-2.5",{"ps-10!":o.icon}],type:o.type,disabled:o.disable,placeholder:o.placeholder},i.value),null,16,We),[[Q,e.value]])])]))}}),Qe={class:"right-0 -bottom-15 flex h-8 w-fit items-center justify-center [&>*]:ml-2"},Ke={class:"w-full space-y-6"},Ge={key:0},Ye={class:"text-error"},Xe={class:"aspect-square w-full"},Je=k({__name:"QrGenerator",setup(o){const e=h(),t=ae({name:"",email:"",phone:"",address:"",url:"",logoRatio:1}),i=new FileReader,s=h(),a=h(),m=h(""),$=async()=>{e.value.toBlob(v=>{if(!v)return;const n=URL.createObjectURL(v),r=document.createElement("a");r.href=n,r.download=t.name+".png",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},"image/png")},q=async()=>{m.value="";function v(){const{name:w,phone:y,email:g,address:T,url:b}=t,d=w,R="",p="",E=[d,R,p,"",""].join(";"),I=`${d} ${p} ${R}`.trim();return{qrContact:`
BEGIN:VCARD
VERSION:3.0
N:${E}
FN:${I}
TEL;TYPE=cell:${y}
EMAIL;INTERNET;PREF:${g}
ADR;TYPE=WORK;PREF=1;LABEL="":;Trường Đại học Tôn Đức Thắng;Phòng ${T};phường Tân Phong;19 Nguyễn Hữu Thọ;Thành phố Hồ Chí Minh;Việt Nam
URL:${b}
END:VCARD
  `.trim(),qrPhone:`MECARD:TEL:${y};;`}}const{qrContact:n}=v(),r={margin:5,width:4096};fe.toCanvas(e.value,n,r),s.value?.(),await B(10);try{if(await ce.scanImage(e.value)!==n)throw new Error;a.value?.next()}catch{m.value="Logo quá lớn, không thể nhận dạng."}};i.onload=v=>{const n=new Image;n.onload=()=>{if(e.value){const r=e.value.getContext("2d"),w=e.value,y=n.width*t.logoRatio,g=n.height*t.logoRatio;r&&r.drawImage(n,(w.width-y)/2,(w.height-g)/2,y,g)}},n.src=v.target?.result};function P(v){const n=v.target;if(n.files&&n.files[0]){const r=n.files[0];s.value=()=>i.readAsDataURL(r)}}return(v,n)=>(u(),z(De,{"button-handler":q,title:"Tạo QR lưu danh bạ"},{default:x(()=>[c(Se,{"indicators-location":"-bottom-15 p-1 hidden",indicator:{activeClasses:"bg-light-primary/90",inactiveClasses:"bg-light-primary/50 hover:bg-light-primary/70"},class:"mb-20 min-h-30",ref_key:"carousel",ref:a},{buttons:x(({isEnd:r,previous:w,isStart:y})=>[l("div",Qe,[c(A,{"button-ref":w,theme:"secondary",class:_({hidden:y})},{default:x(()=>[...n[6]||(n[6]=[L(" Trở về ",-1)])]),_:1},8,["button-ref","class"]),c(A,{class:_({hidden:r}),onclick:q},{default:x(()=>[...n[7]||(n[7]=[L(" Hoàn tất ",-1)])]),_:1},8,["class"]),c(A,{class:_({hidden:y}),onclick:$},{default:x(()=>[...n[8]||(n[8]=[L(" Tải ảnh ",-1)])]),_:1},8,["class"])])]),content:x(()=>[l("div",Ke,[c(C,{name:"Họ và tên",modelValue:t.name,"onUpdate:modelValue":n[0]||(n[0]=r=>t.name=r)},null,8,["modelValue"]),c(C,{name:"Số điện thoại",modelValue:t.phone,"onUpdate:modelValue":n[1]||(n[1]=r=>t.phone=r)},null,8,["modelValue"]),c(C,{name:"Địa chỉ thư điện tử",modelValue:t.email,"onUpdate:modelValue":n[2]||(n[2]=r=>t.email=r)},null,8,["modelValue"]),c(C,{name:"Số phòng",modelValue:t.address,"onUpdate:modelValue":n[3]||(n[3]=r=>t.address=r)},null,8,["modelValue"]),c(C,{name:"Link url fanpage",modelValue:t.url,"onUpdate:modelValue":n[4]||(n[4]=r=>t.url=r)},null,8,["modelValue"]),c(C,{type:"file",onChange:P,accept:"image/*",name:"Ảnh logo"}),c(C,{name:"Tỉ lệ logo so với gốc",modelValue:t.logoRatio,"onUpdate:modelValue":n[5]||(n[5]=r=>t.logoRatio=r)},null,8,["modelValue"]),m.value?(u(),f("div",Ge,[l("a",Ye,S(m.value),1)])):V("",!0)]),l("div",Xe,[l("canvas",{ref_key:"qrCode",ref:e,class:"!size-full"},null,512)])]),_:1},512)]),_:1}))}}),Ze=J({history:Z("/qrcodegen/"),routes:[{path:"/",component:ye},{path:"/qr-contact",component:Je},{path:"/:pathMatch(.*)*",component:_e}]});K(me).use(Ze).mount("#app");
