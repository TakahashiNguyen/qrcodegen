import{w as Y,v as X,a as J,c as Z}from"./vue_runtime-dom-CVY0HImT.js";import{i as ee,C as te}from"./flowbite-BK3zwtRc.js";import{R as oe,c as ne,a as re}from"./vue-router-C89beBgy.js";import{d as x,o as z,e as j,f as u,j as d,k as a,l as m,m as k,r as H,q as N,s as _,t as S,h as le,b as D,w as se,u as ae,v as I,x as W,y as Q,F as ie,z as ue,A as de}from"./vue_runtime-core-CjYySp4x.js";import{x as F,y as p,g as ce}from"./vue_reactivity-BuBFdKc5.js";import{p as $,K as me,q as fe,L as E}from"./vue_shared-CInUqN0f.js";import{u as pe}from"./vueuse_core-8T7hd6cz.js";import{e as he}from"./qr-scanner-B7z2R3KM.js";import{Q as ge}from"./qrcode-9ot_T-Z6.js";import"./popperjs_core-DC5wud4b.js";import"./flowbite-datepicker-BdtIV8Rz.js";import"./vueuse_shared-Bbh_bLDN.js";import"./dijkstrajs-B-FHFk8B.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const v of i.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&n(v)}).observe(document,{childList:!0,subtree:!0});function o(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=o(l);fetch(l.href,i)}})();const ve=x({__name:"App",setup(t){return z(()=>{ee()}),(e,o)=>(u(),j(F(oe)))}}),O=(t,e)=>{const o=t.__vccOpts||t;for(const[n,l]of e)o[n]=l;return o},ye={},be={class:"center h-dvh w-dvw font-mono"},we={class:"bg--0 flex flex-col items-center rounded-3xl p-10"};function xe(t,e){const o=H("router-link");return u(),d("div",be,[a("div",we,[e[1]||(e[1]=a("h1",{class:"text-9xl"},"Xin chào",-1)),m(o,{class:"link w-fit font-sans",to:"/qr-contact"},{default:k(()=>[...e[0]||(e[0]=[N("Tạo mã QR lưu danh bạ",-1)])]),_:1})])])}const ke=O(ye,[["render",xe]]),$e={},_e={class:"center h-dvh w-dvw font-mono"},Ce={class:"bg--0 flex flex-row items-center rounded-3xl p-10"},Ve={class:"flex flex-col"};function Le(t,e){const o=H("router-link");return u(),d("div",_e,[a("div",Ce,[e[2]||(e[2]=a("h1",{class:"text-9xl"},"404!",-1)),a("div",Ve,[e[1]||(e[1]=a("a",null,"Trang này chưa tồn tại hoặc có thể đã bị xóa.",-1)),m(o,{class:"link w-fit font-sans",to:"/"},{default:k(()=>[...e[0]||(e[0]=[N("Về trang chủ",-1)])]),_:1})])])])}const Re=O($e,[["render",Le]]);function U(t){return e=>{t.value=e}}function Ee(){return new Promise(t=>{document.readyState==="complete"?t():window.addEventListener("load",()=>t(),{once:!0})})}function M(t){return new Promise(e=>setTimeout(e,t))}const Ne={class:"p-1"},Se=["type"],A=x({__name:"Button",props:{type:{type:String,default:"button"},theme:{type:String,default:"primary"},buttonRef:{type:Function,required:!1},to:{type:String,required:!1}},setup(t){return(e,o)=>(u(),d("div",Ne,[t.type!=="link"?(u(),d("button",{key:0,title:"",ref:t.buttonRef,type:t.type,class:$(["w-full rounded-lg px-5 py-2.5 text-center text-sm font-medium",{"text--primary bg--primary hover:text--secondary hover:bg--secondary":t.theme=="primary","text--tertiary hover:bg--tertiary hover:-text--2":t.theme=="secondary"}])},[S(e.$slots,"default")],10,Se)):_("",!0),t.type==="link"?(u(),d("a",{key:1,class:"link",href:"#",onClick:o[0]||(o[0]=n=>t.to?e.$router.push({name:t.to}):"")},[S(e.$slots,"default")])):_("",!0)]))}});function B(t){const e=[];for(const o of t)if(o.key==="_content"&&o.children&&Array.isArray(o.children))e.push(...B(o.children));else{const n={...o};o.children&&Array.isArray(o.children)&&(n.children=B(o.children)),e.push(n)}return e}const qe=x({inheritAttrs:!1,setup({},{slots:t,attrs:e}){return()=>B(t.default?.()).map(o=>le("div",{class:["bg--0","h-fit","flex",e.class]},[o]))}}),Te=x({__name:"LoadingDiv",setup(t,{expose:e}){const o=p(!1);function n(){o.value=!o.value}return e({toggleHidden:n}),(l,i)=>(u(),d("div",{class:$(["h-full w-full bg-white dark:bg-black",{hidden:o.value}])},[...i[0]||(i[0]=[a("div",{class:"h-full w-full animate-pulse bg-black/10 dark:bg-white/10"},null,-1)])],2))}}),Pe={key:0,class:"[&>*]:z-[45]"},Ae={key:1,class:"[&>*]:absolute [&>*]:z-[45]"},je=x({__name:"Carousel",props:{isCycle:{type:Boolean,default:!1},overflowing:{type:Boolean,default:!1},duration:{type:Number,default:500},cycleDuration:{type:Number,default:3e3},indicator:{type:Object,default:{activeClasses:"bg-white dark:bg-white/80",inactiveClasses:"bg-white/50 dark:bg-white/40 hover:bg-white/90 dark:hover:bg-white/70"}},indicatorsLocation:{type:[String,Object,Array],default:"bottom-5 left-1/2 -translate-x-1/2"}},setup(t,{expose:e}){const o=p(),n=p(),l=p(),i=p(),v=p(),y=p(),P=U(i),q=U(v),T=p(),g=p(0),r=p(),s=D(()=>g.value==1),b=D(()=>g.value==n.value?.childElementCount),c=t;class V extends te{async _rotate(f){Object.values(f).forEach(L=>{L.el.classList.remove("hidden")}),await M(1),super._rotate(f),g.value=f.middle.position+1,r.value=f.middle.el,await M(c.duration),f.left.el.classList.add("hidden"),f.right.el.classList.add("hidden")}}return z(async()=>{const w=Array.from(n.value.children).map((h,R)=>({position:R,el:h})),f=w.map(()=>{const h=document.createElement("button");return h.className="h-3 w-3 rounded-full",h.type="button",h.title="",l.value?.append(h),h}),L={defaultPosition:0,interval:c.cycleDuration,indicators:{...c.indicator,items:Array.from(f).map((h,R)=>({position:R,el:h}))}};se(pe(r).height,h=>{o.value.style.height=n.value.style.height=h.toString()+"px"}),await Ee(),y.value=new V(o.value,w,L,{}),c.isCycle&&y.value.cycle(),v.value?.addEventListener("click",()=>{(!s.value||c.overflowing||c.isCycle)&&y.value?.prev()}),i.value?.addEventListener("click",()=>{(!b.value||c.overflowing||c.isCycle)&&y.value?.next()}),T.value?.toggleHidden()}),e({next:()=>y.value?.next(),previous:()=>y.value?.prev()}),(w,f)=>(u(),d("div",{ref_key:"carouselElement",ref:o,class:"relative w-full",style:fe({"--duration":t.duration+"ms"})},[m(Te,{ref_key:"loadingDiv",ref:T,class:"absolute z-40"},null,512),a("div",{ref_key:"carouselWrapper",ref:n,class:"relative h-56 overflow-hidden [&>*]:absolute! [&>*]:w-full [&>*]:duration-(--duration) [&>*]:ease-in-out"},[m(qe,me(ae(w.$attrs)),{default:k(()=>[S(w.$slots,"content")]),_:3},16)],512),a("div",{class:$([[t.indicatorsLocation],"absolute z-50 flex space-x-3"]),ref_key:"carouselIndicatorsWrapper",ref:l},null,2),w.$slots.buttons?_("",!0):(u(),d("div",Pe,[a("button",{title:"previous",ref_key:"carouselPrevious",ref:v,type:"button",class:$(["group absolute top-0 left-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&s.value}])},[...f[0]||(f[0]=[a("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[a("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[a("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 1 1 5l4 4"})])],-1)])],2),a("button",{title:"next",ref_key:"carouselNext",ref:i,type:"button",class:$(["group absolute top-0 right-0 flex h-full cursor-pointer items-center justify-center px-4 focus:outline-none",{hidden:!t.overflowing&&!t.isCycle&&b.value}])},[...f[1]||(f[1]=[a("span",{class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/30 group-hover:bg-white/50 group-focus:ring-4 group-focus:ring-white group-focus:outline-none dark:bg-gray-800/30 dark:group-hover:bg-gray-800/60 dark:group-focus:ring-gray-800/70"},[a("svg",{class:"h-4 w-4 text-white dark:text-gray-800","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[a("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})])],-1)])],2)])),w.$slots.buttons?(u(),d("div",Ae,[S(w.$slots,"buttons",{next:F(P),previous:F(q),isEnd:b.value,isStart:s.value})])):_("",!0)],4))}}),De={class:"center h-dvh"},Fe={class:"bg--0 tablet:w-lg desktop:w-4xl desktop:min-h-auto tablet:min-h-auto flex h-fit min-h-dvh w-dvw items-center rounded-lg p-8"},Me={key:0,class:"text-3xl font-medium"},Be={class:"desktop:w-md w-full space-y-6"},Oe=x({__name:"FormContainer",props:{title:{},buttonHandler:{type:Function}},setup(t){return(e,o)=>(u(),d("div",De,[a("div",Fe,[a("form",{class:"desktop:flex-row desktop:justify-between flex size-full flex-col justify-center-safe space-y-6",onSubmit:o[0]||(o[0]=Y((...n)=>e.buttonHandler&&e.buttonHandler(...n),["prevent"]))},[e.title?(u(),d("h5",Me,E(e.title),1)):_("",!0),a("div",Be,[S(e.$slots,"default")])],32)])]))}}),Ue={class:"text--primary bg--0 flex w-full flex-col p-1"},ze={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},He=["value"],Ie=x({__name:"SelectInput",props:I({name:{},list:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=W(t,"modelValue");return(o,n)=>(u(),d("div",Ue,[a("label",ze,E(o.name),1),Q(a("select",{class:"border--primary bg--0 text--0 w-full rounded-lg border p-2.5","onUpdate:modelValue":n[0]||(n[0]=l=>e.value=l)},[(u(!0),d(ie,null,ue(o.list,l=>(u(),d("option",{key:l[0],value:l[1]},E(l[0].replace("_"," ")),9,He))),128))],512),[[X,e.value]])]))}}),We=x({props:{name:{type:String,required:!0}}}),Qe={class:"material-symbols-outlined aspect-square"};function Ke(t,e,o,n,l,i){return u(),d("span",Qe,E(t.name),1)}const Ge=O(We,[["render",Ke]]),Ye={class:"text--primary bg--0 flex w-full flex-col p-1"},Xe={class:"bg--0 z-1 -mb-2 ml-2 block w-fit text-sm font-medium"},Je={class:"relative z-0"},Ze={key:0,class:"pointer-events-none absolute inset-y-0 start-0 flex items-center px-[9px]"},et=["type","disabled","placeholder"],C=x({__name:"TextInput",props:I({name:{type:String,required:!0},type:{type:String,default:"text"},icon:{type:String,required:!1},placeholder:{type:String,required:!1},disable:{type:Boolean,required:!1},accept:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=W(t,"modelValue"),o=t,n=D(()=>({accept:o.accept||void 0}));return(l,i)=>(u(),d("div",Ye,[a("label",Xe,E(t.name),1),a("div",Je,[t.icon?(u(),d("div",Ze,[m(Ge,{name:t.icon.toLowerCase()},null,8,["name"])])):_("",!0),Q(a("input",de({title:"","onUpdate:modelValue":i[0]||(i[0]=v=>e.value=v),class:["border--primary bg--0 text--0 w-full rounded-lg border p-2.5",{"ps-10!":t.icon}],type:t.type,disabled:t.disable,placeholder:t.placeholder},n.value),null,16,et),[[J,e.value]])])]))}}),tt={class:"right-0 -bottom-15 flex h-8 w-fit items-center justify-center [&>*]:ml-2"},ot={class:"w-full space-y-6"},nt={key:1},rt={class:"text-error"},lt={class:"aspect-square w-full"},st=x({__name:"QrGenerator",setup(t){const e=p(),o=p(new Map),n=ce({name:"",email:"",phone:"",address:"",url:"",logoRatio:1,errorLevel:"L"}),l=new FileReader,i=p(),v=p(),y=p(""),P=async()=>{e.value.toBlob(g=>{if(!g)return;const r=URL.createObjectURL(g),s=document.createElement("a");s.href=r,s.download=n.name+".png",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},"image/png")},q=async()=>{y.value="";function g(){const{name:b,phone:c,email:V,address:w,url:f}=n,L=b,h="",R="",K=[L,h,R,"",""].join(";"),G=`${L} ${R} ${h}`.trim();return{qrContact:`
BEGIN:VCARD
VERSION:3.0
N:${K}
FN:${G}
TEL;TYPE=cell:${c}
EMAIL;INTERNET;PREF:${V}
ADR;TYPE=WORK;PREF=1;LABEL="":;Trường Đại học Tôn Đức Thắng;Phòng ${w};phường Tân Phong;19 Nguyễn Hữu Thọ;Thành phố Hồ Chí Minh;Việt Nam
URL:${f}
END:VCARD
  `.trim(),qrPhone:`MECARD:TEL:${c};;`}}const{qrContact:r}=g(),s={margin:5,width:4096,errorCorrectionLevel:n.errorLevel};ge.toCanvas(e.value,r,s),i.value?.(),await M(10);try{if(await he.scanImage(e.value)!==r)throw new Error;v.value?.next()}catch{y.value="Logo quá lớn, không thể nhận dạng."}};l.onload=g=>{const r=new Image;r.onload=()=>{if(e.value){const s=e.value.getContext("2d"),b=e.value,c=r.width*n.logoRatio,V=r.height*n.logoRatio;s&&s.drawImage(r,(b.width-c)/2,(b.height-V)/2,c,V)}},r.src=g.target?.result};function T(g){const r=g.target;if(r.files&&r.files[0]){const s=r.files[0];i.value=()=>l.readAsDataURL(s)}}return o.value.set("Cao","high"),o.value.set("Trung bình","medium"),o.value.set("Thấp","low"),(g,r)=>(u(),j(Oe,{"button-handler":q,title:"Tạo QR lưu danh bạ"},{default:k(()=>[m(je,{"indicators-location":"-bottom-15 p-1 hidden",indicator:{activeClasses:"bg-light-primary/90",inactiveClasses:"bg-light-primary/50 hover:bg-light-primary/70"},class:"mb-20 min-h-30",ref_key:"carousel",ref:v},{buttons:k(({isEnd:s,previous:b,isStart:c})=>[a("div",tt,[m(A,{"button-ref":b,theme:"secondary",class:$({hidden:c})},{default:k(()=>[...r[7]||(r[7]=[N(" Trở về ",-1)])]),_:1},8,["button-ref","class"]),m(A,{class:$({hidden:s}),onclick:q},{default:k(()=>[...r[8]||(r[8]=[N(" Hoàn tất ",-1)])]),_:1},8,["class"]),m(A,{class:$({hidden:c}),onclick:P},{default:k(()=>[...r[9]||(r[9]=[N(" Tải ảnh ",-1)])]),_:1},8,["class"])])]),content:k(()=>[a("div",ot,[m(C,{name:"Họ và tên",modelValue:n.name,"onUpdate:modelValue":r[0]||(r[0]=s=>n.name=s)},null,8,["modelValue"]),m(C,{name:"Số điện thoại",modelValue:n.phone,"onUpdate:modelValue":r[1]||(r[1]=s=>n.phone=s)},null,8,["modelValue"]),m(C,{name:"Địa chỉ thư điện tử",modelValue:n.email,"onUpdate:modelValue":r[2]||(r[2]=s=>n.email=s)},null,8,["modelValue"]),m(C,{name:"Số phòng",modelValue:n.address,"onUpdate:modelValue":r[3]||(r[3]=s=>n.address=s)},null,8,["modelValue"]),m(C,{name:"Link url fanpage",modelValue:n.url,"onUpdate:modelValue":r[4]||(r[4]=s=>n.url=s)},null,8,["modelValue"]),m(Ie,{name:"Cấp độ (càng cao càng chi tiết; mặc định: thấp)",list:o.value,modelValue:n.errorLevel,"onUpdate:modelValue":r[5]||(r[5]=s=>n.errorLevel=s)},null,8,["list","modelValue"]),m(C,{type:"file",onChange:T,accept:"image/*",name:"Ảnh logo"}),i.value?(u(),j(C,{key:0,name:"Tỉ lệ logo so với gốc",modelValue:n.logoRatio,"onUpdate:modelValue":r[6]||(r[6]=s=>n.logoRatio=s)},null,8,["modelValue"])):_("",!0),y.value?(u(),d("div",nt,[a("a",rt,E(y.value),1)])):_("",!0)]),a("div",lt,[a("canvas",{ref_key:"qrCode",ref:e,class:"!size-full"},null,512)])]),_:1},512)]),_:1}))}}),at=ne({history:re("/qrcodegen/"),routes:[{path:"/",component:ke},{path:"/qr-contact",component:st},{path:"/:pathMatch(.*)*",component:Re}]});Z(ve).use(at).mount("#app");
